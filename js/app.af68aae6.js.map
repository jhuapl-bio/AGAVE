{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/MoleculeViewer.vue?3cac","webpack:///./src/components/NavigationBar.vue?eae9","webpack:///./src/App.vue?5b6c","webpack:///./src/components/Visualization.vue?0ad5","webpack:///./src/components/VisualizationOptions.vue?f230","webpack:///./src/assets/images/apl.logo.large.horizontal.white.svg","webpack:///./src/App.vue?e164","webpack:///./src/components/NavigationBar.vue?8159","webpack:///./src/components/NavigationBar.vue?1927","webpack:///./src/components/NavigationBar.vue?1fe4","webpack:///./src/components/NavigationBar.vue","webpack:///./src/views/DataView.vue?1d41","webpack:///./src/components/Visualization.vue?c322","webpack:///./src/components/VisualizationOptions.vue?b655","webpack:///./src/shared/LocalDataHelper.ts","webpack:///./src/shared/DataHandler.ts","webpack:///./src/components/VisualizationOptions.vue?948a","webpack:///./src/components/VisualizationOptions.vue?6ed8","webpack:///./src/components/VisualizationOptions.vue","webpack:///./src/components/Heatmap.vue?f991","webpack:///./src/shared/Parsing.ts","webpack:///./src/components/Heatmap.vue?fa22","webpack:///./src/components/Heatmap.vue?c244","webpack:///./src/components/Heatmap.vue","webpack:///./src/components/MoleculeViewer.vue?9481","webpack:///./src/components/BindingSites.vue?f03d","webpack:///./src/components/BindingSites.vue?1ade","webpack:///./src/components/BindingSites.vue?ad5e","webpack:///./src/components/BindingSites.vue","webpack:///./src/components/MoleculeViewer.vue?0cb6","webpack:///./src/components/MoleculeViewer.vue?0786","webpack:///./src/components/MoleculeViewer.vue","webpack:///./src/components/BarPlot.vue?aad5","webpack:///./src/components/BarPlot.vue?82a2","webpack:///./src/components/BarPlot.vue?59ff","webpack:///./src/components/BarPlot.vue","webpack:///./src/components/Visualization.vue?0c6f","webpack:///./src/components/Visualization.vue?aa98","webpack:///./src/components/Visualization.vue","webpack:///./src/views/DataView.vue?fadb","webpack:///./src/views/DataView.vue?f626","webpack:///./src/views/DataView.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/views/AboutView.vue?a810","webpack:///./src/views/AboutView.vue?8294","webpack:///./src/views/AboutView.vue?3192","webpack:///./src/views/AboutView.vue","webpack:///./src/router/index.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_m","staticRenderFns","_v","attrs","_l","on","$event","showTitleFull","_s","substring","_e","showMenu","component","sliderUpdate","DataHandler","cells","ref","column_width","isSwitched","sortBy","changePosition","segment","position","siteHover","changeReferenceSequence","emitChange","full","target","model","callback","$$v","$set","expression","option","id","domProps","label","segments","groups","consensus_map","experiment","depth_threshold","position_max","customfile","string","JSON","parse","filepath","d3","Promise","resolve","reject","then","catch","error","console","log","header","text","objects","map","values","reduce","k","sort","referenceSequence","position_ranges","xvalues","pdb","selectedPosition","yvalues","cells_full","raw_data","group","frequency_threshold","localDataHelper","selected_consensus","defaultDataList","virus","subfolder","data_selected","subtype","positions","cells_filtered","filter","updateData","updateCells","indexOf","forEach","prep","residues","consensus_aa","residue","unique","counts","aa","proportion","count","depth","toFixed","max","consensus_aa_count","total","consensus_count","min","grp","newgroups","type","update","$this","Set","parseGroups","readJSON","parseJSON","minrange","maxrange","fetching_information","activeTab","oldValue","$emit","reader","FileReader","estimate_segment","split","err","onload","event","getData","onerror","$swal","fire","icon","showConfirmButton","title","readAsText","params","updateSubtype","fullUpdate","required","default","tooltiptable","downloadSVG","isFlipped","log_scale","frac","Math","log10","color","round","x","pow","g","b","parsing","scrollDirection","partitions","test","reference_seq","msg","height","boxHeight","width","boxWidth","oversize","border","svgs","scaleX","scaleColor","colors","start","end","xAxisInner","xAxisGroup","xAxisGT","xAxisGB","yAxis","yAxisG","xAxisT","xAxisB","context","color_range","divisionYScale","yAxisDivision","scaleY","positions_unique","preps","containerHeight","chartHeight","legendWidth","legendHeight","legendPadding","svg","margin","top","bottom","left","right","updateHeatmap","defineHeatmap","toJSON","message","evt","document","querySelector","svg_xml","XMLSerializer","serializeToString","blob","Blob","url","URL","createObjectURL","img","Image","w","h","canvas","createElement","append","attr","ctx","getContext","drawImage","font","fillText","revokeObjectURL","canvasdata","toDataURL","a","getElementById","download","Date","now","href","click","src","$refs","heatmapLegend","clientWidth","heatmapDiv","remove","selectAll","makeHeatmap","domain","range","minD","maxD","heatmapdiv","style","body","innerSvg","legendVals","legend_BoxHeight","enter","String","replace","col","frac2Color","u","fract","block","getFrac","calculateColor","cutoff","toString","legendScaleY","legendYAxis","ticks","tickFormat","val","parseFloat","toExponential","select","contextheight","brush","join","classed","exit","extent","brushended","selection","updatePositions","brushed","ranges","invert","scrollAttr","y","marginA","marginB","xTicks","long","over","datea","dateb","localeCompare","tickSizeOuter","interval","scaleYText","scaleXTestT","scaleXTestB","maxYTick","nodes","getBBox","maxXTick","replaceAll","prep_id","highlightCell","unHighlight","transition","duration","ratio","focusColumn","node","getBoundingClientRect","html","_rowVariant","unfocusColumn","focus","scaleXpost","listScales","minMax","obj","post","scrollLeft","depth_thresh","freq_thresh","scale","components","protein","proteinChange","toLowerCase","localPosition","available_focus_chains","chain_focus","chains","ligands","directives","rawName","modifiers","sticky","rowClicked","ligandQuerying","queryLigands","response","item","promises","entities","getdata","allSettled","responses","status","f","entity","additionalData","entityId","accession","dataType","deep","entity_focus","map_positions","queryingResidueMapping","queryingReferenceSequence","assemblyId","protein_per_segment","endIndex","options","moleculeId","hideControls","bgColor","queryAPI","viewer","visual","removeButtons","parseError","UniProt","uniprots","keys","mappings","entity_id","mapping","struct_asym_id","residue_number","unp_start","unp_end","reportError","docs","ref_seq","chain","determinePosition","chain_id","molecule_sequence","PDBeMolstarPlugin","render","make_pdbemolstar","mapPosition","clearSelection","e","reset","camera","button2","immediate","BindingSites","scales","makeBarPlot","selected_scale","barplotDiv","svgG","aas","chartWidth","boxDim","clamp","tickSize","xAxis","yAxisB","stacks","v","legendMargin","legendBoxHeight","legendBox","xAxisLegB","maxyTick","barPlotDiv","switchedViewer","gh","heatmap","changeDataHandler","barplot","updateReference","Heatmap","VisualizationOptions","MoleculeViewer","BarPlot","Visualization","NavigationBar","DataView","use","routes","path","router","base","config","productionTip","$mount"],"mappings":"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","file":"js/app.af68aae6.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/BARDA/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoleculeViewer.vue?vue&type=style&index=0&id=2dc54c2e&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationBar.vue?vue&type=style&index=0&id=31c68025&scoped=true&lang=scss&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=4fa5c681&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualization.vue?vue&type=style&index=0&id=d54c97b2&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualizationOptions.vue?vue&type=style&index=0&id=8e4a6694&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/apl.logo.large.horizontal.white.de45b0ff.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('NavigationBar'),_c('div',{staticClass:\"router-outer container\"},[_c('div',{staticClass:\"router-inner columns pt-4\",staticStyle:{\"padding\":\"0px\",\"margin\":\"0px\"}},[_c('div',{staticClass:\"column is-offset-1-mobile add-padding\"},[_c('DataView')],1)])]),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{staticClass:\"footer\"},[_c('div',{staticClass:\"content has-text-centered\"},[_vm._v(\" The work of JHU, JHU/APL, and BARDA. \")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-navbar',{staticClass:\"navbar is-aplblue\",staticStyle:{\"color\":\"white\"},attrs:{\"centered\":\"\",\"role\":\"navigation\",\"aria-label\":\"main navigation\"}},[_c('div',{staticClass:\"navbar-menu\",attrs:{\"id\":\"navbarBasicExample\"}},[_c('h1',{staticClass:\"navbar-item is-size-3\",staticStyle:{\"min-width\":\"25%\",\"max-width\":\"50%\"}},[_vm._l((_vm.name),function(n){return _c('span',{key:n,staticStyle:{\"color\":\"#fff\",\"cursor\":\"default\"},on:{\"mouseover\":function($event){_vm.showTitleFull = true},\"mouseleave\":function($event){_vm.showTitleFull=false}}},[_vm._v(\" \"+_vm._s(n.substring(0,1))+\" \")])}),_c('transition',{attrs:{\"name\":\"slide-fade\"}},[(_vm.showTitleFull)?_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',_vm._l((_vm.name),function(n){return _c('span',{key:n,staticStyle:{\"color\":\"#fff\"}},[_c('small',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(_vm._s(n)+\" \")])])}),0)]):_vm._e()])],2),_c('div',{staticClass:\"navbar-start\"},[_c('a',{staticClass:\"navbar-item force-center\",attrs:{\"id\":\"logo\",\"href\":\"https://jhu.edu\"}},[_c('img',{staticClass:\"navbar-image\",attrs:{\"src\":require(\"@/assets/images/apl.logo.large.horizontal.white.svg\")}})])]),_c('div',{staticClass:\"navbar-end\",staticStyle:{\"min-width\":\"25%\",\"max-width\":\"50%\"}},[_c('a',{staticClass:\"navbar-item\",staticStyle:{\"opacity\":\"0.0\"}},[_vm._v(\" About \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\n\r\n@Component({})\r\nexport default class NavigationBar extends Vue {\r\n  private showMenu = false;\r\n  public showTitleFull = false;\r\n  public name: string[] = ['Automated', 'Genomics', 'Application for', 'Variant', 'Exploration']\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationBar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationBar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NavigationBar.vue?vue&type=template&id=31c68025&scoped=true&\"\nimport script from \"./NavigationBar.vue?vue&type=script&lang=ts&\"\nexport * from \"./NavigationBar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NavigationBar.vue?vue&type=style&index=0&id=31c68025&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31c68025\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Visualization')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row\",staticStyle:{\"padding\":\"0px\",\"margin\":\"0\"}},[_c('div',{staticClass:\"col-lg-12\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"Settings\")]),_c('VisualizationOptions',{on:{\"sliderUpdate\":_vm.sliderUpdate}})],1),_vm._m(0),_vm._m(1),(_vm.DataHandler.cells && _vm.DataHandler.cells.length > 0)?_c('div',{staticClass:\"col-lg-8 pr-5\"},[_c('Heatmap',{ref:\"heatmap\",attrs:{\"column_width\":_vm.column_width,\"DataHandler\":_vm.DataHandler,\"isSwitched\":_vm.isSwitched,\"sortBy\":_vm.sortBy},on:{\"changePosition\":_vm.changePosition}})],1):_vm._e(),_c('b-col',{staticClass:\"col-lg-4 pb-1 big-top-margin\"},[_c('MoleculeViewer',{attrs:{\"segment\":_vm.segment,\"position\":_vm.position,\"DataHandler\":_vm.DataHandler},on:{\"siteHover\":_vm.siteHover,\"changeReferenceSequence\":_vm.changeReferenceSequence}})],1),_vm._m(2),_c('b-col',{staticClass:\"col-lg-8 pb-1\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"Stacked Bar Chart\")]),_c('h5',{staticClass:\"subtitle\"},[_vm._v(\"Click a column in the heatmap to visualize its diversity\")]),(_vm.DataHandler.cells)?_c('BarPlot',{ref:\"barplot\",attrs:{\"DataHandler\":_vm.DataHandler}}):_vm._e()],1),_c('canvas',{attrs:{\"id\":\"mycanvas\"}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-lg-12\"},[_c('hr',{staticClass:\"solid\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-lg-12\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"Heatmap Viewer\")]),_c('h5',{staticClass:\"subtitle\"},[_vm._v(\"Click a column in the heatmap to zoom in on its molecular position\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-lg-12\"},[_c('hr',{staticClass:\"solid\"})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-tabs',[_c('b-tab',{attrs:{\"title\":\"Data Settings\",\"active\":\"\"}},[_c('div',{staticClass:\"columns is-variable is-4\"},[_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Default Data\"}},[_c('b-select',{attrs:{\"placeholder\":\"Data\"},on:{\"change\":function($event){return _vm.emitChange($event, { full: true, target: 'data_selected' })}},model:{value:(_vm.DataHandler.data_selected),callback:function ($$v) {_vm.$set(_vm.DataHandler, \"data_selected\", $$v)},expression:\"DataHandler.data_selected\"}},_vm._l((_vm.DataHandler.defaultDataList),function(option){return _c('option',{key:option.id,domProps:{\"value\":option}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),0)],1),_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Segment\"}},[_c('b-select',{attrs:{\"placeholder\":\"Segment\",\"options\":_vm.segments},on:{\"change\":function($event){return _vm.emitChange($event, { full: true, target: 'segment' })}},model:{value:(_vm.DataHandler.segment),callback:function ($$v) {_vm.$set(_vm.DataHandler, \"segment\", $$v)},expression:\"DataHandler.segment\"}})],1),_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Group\"}},[(_vm.DataHandler.group)?_c('b-select',{attrs:{\"placeholder\":\"Group\",\"multiple\":\"\",\"options\":_vm.DataHandler.groups},on:{\"change\":function($event){return _vm.emitChange($event, { full: true, target: 'group' })}},model:{value:(_vm.DataHandler.group),callback:function ($$v) {_vm.$set(_vm.DataHandler, \"group\", $$v)},expression:\"DataHandler.group\"}}):_vm._e()],1),(_vm.DataHandler && _vm.DataHandler.consensus_map)?_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Axis Experiment Consensus\"}},[_c('b-select',{attrs:{\"disabled\":!_vm.isSwitched,\"placeholder\":\"Mapped Experiment\"},on:{\"change\":function($event){return _vm.emitChange($event, { full: false, target: 'selected_consensus' })}},model:{value:(_vm.DataHandler.selected_consensus),callback:function ($$v) {_vm.$set(_vm.DataHandler, \"selected_consensus\", $$v)},expression:\"DataHandler.selected_consensus\"}},_vm._l((_vm.DataHandler.consensus_map),function(option){return _c('option',{key:option.experiment,domProps:{\"value\":option}},[_vm._v(\" \"+_vm._s(option.experiment)+\" \")])}),0)],1):_vm._e(),_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Subtype\"}},[_c('b-select',{attrs:{\"placeholder\":\"Subtype\"},on:{\"change\":function($event){return _vm.emitChange($event, { full: false, target: 'subtype' })}},model:{value:(_vm.DataHandler.subtype),callback:function ($$v) {_vm.$set(_vm.DataHandler, \"subtype\", $$v)},expression:\"DataHandler.subtype\"}},_vm._l((['H1N1', 'H3N2']),function(option){return _c('option',{key:option,domProps:{\"value\":option}},[_vm._v(\" \"+_vm._s(option)+\" \")])}),0)],1)],1)]),_c('b-tab',{attrs:{\"title\":\"Heatmap Settings\"}},[_c('div',{staticClass:\"columns is-variable is-4\"},[_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Depth Threshold\"}},[_c('b-numberinput',{attrs:{\"step\":1,\"min\":0,\"max\":100000,\"controls-position\":\"compact\"},model:{value:(_vm.depth_threshold),callback:function ($$v) {_vm.depth_threshold=$$v},expression:\"depth_threshold\"}})],1),_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Column Width\"}},[_c('b-numberinput',{attrs:{\"step\":1,\"min\":1,\"max\":100000,\"controls-position\":\"compact\"},model:{value:(_vm.column_width),callback:function ($$v) {_vm.column_width=$$v},expression:\"column_width\"}})],1),_c('b-field',{staticClass:\"column is-2\",attrs:{\"label\":\"Position Ranges\"}},[_c('b-slider',{attrs:{\"y\":\"\",\"min\":1,\"max\":_vm.DataHandler.position_max,\"step\":1,\"ticks\":\"\"},on:{\"change\":function($event){return _vm.emitChange($event, { full: false, target: 'position_ranges' })}},model:{value:(_vm.DataHandler.position_ranges),callback:function ($$v) {_vm.$set(_vm.DataHandler, \"position_ranges\", $$v)},expression:\"DataHandler.position_ranges\"}})],1),_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Sort\"}},[_c('b-switch',{model:{value:(_vm.sortBy),callback:function ($$v) {_vm.sortBy=$$v},expression:\"sortBy\"}},[_vm._v(\" \"+_vm._s(( _vm.sortBy ? 'Name' : 'Time' ))+\" \")])],1),_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":\"Axis labels\"}},[_c('b-switch',{model:{value:(_vm.isSwitched),callback:function ($$v) {_vm.isSwitched=$$v},expression:\"isSwitched\"}},[_vm._v(\" \"+_vm._s(( _vm.isSwitched ? 'Consensus' : 'Reference' ))+\" \")])],1)],1)]),_c('b-tab',{attrs:{\"title\":\"Data Upload\"}},[_c('div',{staticClass:\"columns is-variable is-4\"},[_c('b-field',{staticClass:\"column is-6\",attrs:{\"label\":\"Custom Variant File Input\"}},[_c('b-form-file',{ref:\"customfile\",attrs:{\"type\":\"file\",\"id\":\"customfile\",\"placeholder\":\"Choose a file or drop it here...\",\"drop-placeholder\":\"Drop file here...\"},model:{value:(_vm.customfile),callback:function ($$v) {_vm.customfile=$$v},expression:\"customfile\"}})],1)],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as d3 from 'd3'\r\n\r\ninterface StringMap { [key: string]: string; }\r\n\r\nexport default class LocalDataHelper {\r\n  public parseJSON(string: string)\r\n  {\r\n    return JSON.parse(string)\r\n  }\r\n  public async readTSV(filepath: string)\r\n  {\r\n    // const data = require(\"/data/\" + filepath)\r\n    let data = await d3.tsv(`${process.env.BASE_URL}data/${filepath}`)\r\n    \r\n    return data.slice(0, 2)\r\n\r\n    // Tom's D3 code for parsing data before consuming it. This could be useful?\r\n\r\n    //    \tlet temp = filepath.responseText;\r\n    //     // slice off header before parsing file\r\n    //     let ret: Object[] = [];\r\n    //     d3.tsvParse(temp.split('\\n').slice(1).join('\\n')).map(function(row) {\r\n\r\n    //         var obj: Object[] = [];\r\n    //         // split off prep_ID column if it exists as column 1\r\n    //         if(row[0].match(/[a-z]/i)){\r\n    //             obj.id = row[0];\r\n    //             obj.data = row.slice(1).map(function(value) {\r\n    //                 return +value;\r\n    //             });\r\n    //         } else {\r\n    //             obj.data = row.map(function(value) {\r\n    //                 return +value;\r\n    //             });\r\n    //         }\r\n    //         ret.push(obj);\r\n    //     });\r\n\r\n    //     return ret;\r\n    \r\n\r\n  }\r\n\r\n  public readJSON(filepath: string)\r\n  {\r\n    return new Promise<void>(function(resolve,reject){\r\n      d3.json(`${process.env.BASE_URL}data/${filepath}`).then((data:any)=>{\r\n        resolve(data)\r\n      }).catch((error)=>{\r\n        console.log(\"error\")\r\n        reject(error)\r\n      })\r\n    })\r\n\r\n    // Tom's D3 code for parsing data before consuming it. This could be useful?\r\n\r\n    //    \tlet temp = filepath.responseText;\r\n    //     // slice off header before parsing file\r\n    //     let ret: Object[] = [];\r\n    //     d3.tsvParse(temp.split('\\n').slice(1).join('\\n')).map(function(row) {\r\n\r\n    //         var obj: Object[] = [];\r\n    //         // split off prep_ID column if it exists as column 1\r\n    //         if(row[0].match(/[a-z]/i)){\r\n    //             obj.id = row[0];\r\n    //             obj.data = row.slice(1).map(function(value) {\r\n    //                 return +value;\r\n    //             });\r\n    //         } else {\r\n    //             obj.data = row.map(function(value) {\r\n    //                 return +value;\r\n    //             });\r\n    //         }\r\n    //         ret.push(obj);\r\n    //     });\r\n\r\n    //     return ret;\r\n    \r\n\r\n  }\r\n\r\n  public async readTSVNoHeader(filepath: string, header: string[])\r\n  {\r\n    // const data_tsv = await d3.tsv(`/data/${filepath}`)\r\n    let text = await d3.text(`/data/${filepath}`)\r\n    // text = header + \"\\n\" + text\r\n    var data = d3.tsvParseRows(text)\r\n    var objects = data.map(function(values) {\r\n      return header.reduce(function(o: {[k: string]: any}, k, i) {\r\n        o[k] = values[i];\r\n        return o;\r\n\r\n      }, {});\r\n    });\r\n\r\n    \r\n    \r\n    return objects\r\n  }\r\n} ","import * as d3 from 'd3'\nimport LocalDataHelper from \"@/shared/LocalDataHelper\";\n\ninterface StringMap { [key: string]: string; }\n\nexport default class DataHandler {\n    sort: boolean = true\n    referenceSequence: number[] = []\n    position_ranges: number[] = []\n    xvalues: any[] = []\n    pdb: any = null\n    selectedPosition: number = 1\n    yvalues: any[] = []\n    cells: any = null\n    cells_full: any = null\n    raw_data: any = null\n    groups: any[] = []\n    group: any[] = []\n    segment: any = 'HA'\n    segments: any[] = []\n    frequency_threshold: number = 0\n    depth_threshold: number = 0\n    public localDataHelper = new LocalDataHelper()\n    position_max: any = 1\n    consensus_map: any  = null\n    selected_consensus: any = {}\n    defaultDataList: any = [\n        {\n            id: \"New\",\n            label: \"BARDA\",\n            virus: \"H1N1\",\n            subfolder: \"grouped\"\n        },\n        {\n            id: \"Gaydos\",\n            label: \"Gaydos\",\n            virus: \"H3N2\",\n            subfolder: \"grouped\"\n        },\n\n        \n        \n    ]\n    data_selected: any  = null\n    subtype: string = \"H3N2\"\n    public  constructor() {\n        this.data_selected = this.defaultDataList[0]\n    }\n    public updateReference(referenceSequence: any){\n        this.referenceSequence = referenceSequence\n        // this.updatePositions(d3.extent(referenceSequence.map((d: any)=>{return d.position })))\n    }\n    public updatePositions(positions: any[])\n    {\n        this.position_ranges = positions\n        // this.updateCells()\n    }\n    public updateGroup(positions: number[])\n    {\n        this.groups = positions\n    }\n    public updateSegment(positions: number[])\n    {\n        this.position_ranges = positions\n    }\n    public updateSubtype(subtype: string)\n    {\n        this.subtype = subtype\n    }\n    public updateCells(){\n        let cells_filtered= this.cells_full.filter((d:any)=>{\n            return d.position >= this.position_ranges[0] && d.position <= this.position_ranges[1]\n        })\n        this.cells = cells_filtered\n    }  \n    public fullUpdate(){\n        this.updateData()\n        this.updateCells()\n        return\n    }\n    public updateData(){\n        // Format data into cells\n        const $this = this\n        let data = this.raw_data\n        let cells: any[] = [];\n        data = data.filter( (d:any) => {\n            return this.group.indexOf(d.group) > -1;\n        })\n        \n        const consensus_map: any[] = []\n        data.forEach((prep:any)=>{\n            consensus_map.push({experiment: prep.experiment, residues: prep.residues.map((d:any, i:number)=>{return d.consensus_aa +\".\" + d.position})})\n            prep.residues.forEach((residue:any)=>{\n                cells.push({ \n                    unique: residue.counts.map((d:any)=>{\n                        return { aa: d.aa, proportion: (d.count / +residue.depth).toFixed(3)}\n                    }),\n                    segment:this.segment, \n                    max: residue.consensus_aa_count, \n                    experiment: prep.experiment, \n                    depth: residue.depth, \n                    position: +residue.position, \n                    total:+residue.depth, \n                    count: residue.counts.length, \n                    aa: residue.consensus_aa, \n                    consensus_count: residue.consensus_aa_count  \n                })\n            })\n        })\n        this.consensus_map = consensus_map\n        this.selected_consensus = this.consensus_map[0]\n        const min: any = d3.min(cells.map((d:any)=>{return +d.position}))\n        const max: any = d3.max(cells.map((d:any)=>{return +d.position}))\n        this.position_max = max\n        this.position_ranges = [min, max]\n        this.cells_full = cells\n    }\n    private parseGroups(group: any, groups: any){\n        let grp\n        if (! group || group.length == 0){\n            grp = [groups[0]]\n        } else {\n            let newgroups: any = []\n            group.forEach((d:any)=>{\n                if (groups.indexOf(group) <= -1){\n                    newgroups.push(d)\n                }\n            })\n            if (newgroups.length == 0){\n                grp = newgroups[0]\n            } else {\n                grp = newgroups\n            }\n        }\n        return grp\n    }\n    public async getData(string:any, type: string){\n        const $this = this\n        let data:any = null\n        try{\n            if (type == 'file'){\n                data = await $this.localDataHelper.readJSON(string)\n                update(data)\n                return \n            } else {\n                data = ($this.localDataHelper.parseJSON(string))\n                update(data)\n                // resolve()\n                return\n            }\n            \n        } catch(err){\n            this.raw_data = []\n            // this.cells = []\n            // this.group = []\n            throw err\n        }\n\n        function update(data: any){\n            $this.groups = [...new Set(data.map((d: any) => d.group))];\n            let group: any  = $this.parseGroups($this.group, $this.groups)\n            $this.group = group\n            $this.raw_data = data\n        }\n    }\n} ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n\r\nimport { Component, Vue, Watch, Prop } from 'vue-property-decorator'\r\nimport DataHandler from \"@/shared/DataHandler\";\r\n\r\n@Component({})\r\nexport default class VisualizationOptions extends Vue {\r\n\r\n  // Variables to track the input values\r\n  public depth_threshold = 0\r\n  public frequency_threshold = 0.2\r\n  public column_width = 9\r\n  public data:any = null\r\n  public cells: any = null\r\n  public customfile: any = null\r\n  public segment: string = 'HA'\r\n  public segments: Array<string> = ['HA', 'NP', 'NA', 'M', 'PB1', 'PB2', 'NS', 'PA']\r\n  public group: any[] = []\r\n  public groups: Array<any> = []\r\n  public isSwitched: boolean = true\r\n  public sortBy: boolean = true\r\n  minrange: number = 1\r\n  maxrange: number = 1\r\n  position_max: any =1\r\n  position_ranges: any = [this.minrange,this.maxrange]\r\n  fetching_information = false\r\n\r\n  @Prop({ required: false, default: null })\r\n  public referenceSequence!: any;\r\n    \r\n  private DataHandler = new DataHandler()\r\n\r\n  activeTab = 0\r\n\r\n  @Watch(\"isSwitched\")\r\n  onSwitchedChange(value: boolean, oldValue: boolean) {\r\n    this.$emit('sliderUpdate', {value: value, target: 'isSwitched'})\r\n  }\r\n\r\n  @Watch(\"sortBy\")\r\n  onSortByChange(value: boolean, oldValue: boolean) {\r\n    this.$emit('sliderUpdate', {value: value, target: 'sortBy'})\r\n  }\r\n\r\n  @Watch(\"customfile\")\r\n  async onChangeFile(value: any, oldValue: any) {\r\n    const $this = this\r\n    const reader = new FileReader()\r\n    let estimate_segment: any = null\r\n    try{\r\n      estimate_segment = value.name.split(\".\")[0]\r\n      if (this.segments.indexOf(estimate_segment) > -1){\r\n        this.segment = estimate_segment\r\n      }\r\n    } catch(err){\r\n      console.log(err)\r\n    }\r\n    reader.onload = function(event:any) {\r\n      $this.getData(reader.result, 'string').then((d:any)=>{\r\n        $this.DataHandler.segment = $this.segment\r\n        $this.$emit('sliderUpdate', {value: $this.DataHandler, target: 'DataHandler'})\r\n      })\r\n    }\r\n    reader.onerror = function(err:any){\r\n      $this.$swal.fire({\r\n        position: 'center',\r\n        icon: 'error',\r\n        showConfirmButton:true,\r\n        title:  \"Error in submitting file\",\r\n        text: err\r\n      })\r\n    }\r\n    let text = reader.readAsText(value) // you could also read images and other binaries\r\n  }\r\n\r\n  @Watch('column_width')\r\n  onColWidthChanged(value: number, oldValue: number) {\r\n    this.$emit('sliderUpdate', {value: value, target: 'column_width'})\r\n  }\r\n\r\n  @Watch('depth_threshold')\r\n  onDepthTChanged(value: number, oldValue: number) {\r\n    this.emitChange(value, {full: false, target: 'depth_threshold' })\r\n  }\r\n\r\n  async emitChange(event: any, params: { full: boolean, target: string} ){\r\n    // console.log(event, params,)\r\n    if (params.target == 'depth_threshold'){\r\n      this.DataHandler.depth_threshold = event\r\n    } else if (params.target == 'segment'){\r\n      this.DataHandler.segment = event\r\n      await this.getData(`${this.DataHandler.data_selected.id}/${this.DataHandler.data_selected.subfolder}/${event}.json`, \"file\")\r\n    } else if (params.target == 'data_selected'){\r\n      this.DataHandler.group = []\r\n      this.DataHandler.updateSubtype(event.virus)\r\n      await this.getData(`${this.DataHandler.data_selected.id}/${this.DataHandler.data_selected.subfolder}/${this.DataHandler.segment}.json`, \"file\")\r\n    } else if (params.target == 'group' ){\r\n      this.DataHandler.group = event\r\n    } else if (params.target == 'position_ranges'){\r\n      this.DataHandler.position_ranges = event\r\n    } else if (params.target == 'selected_consensus'){\r\n      this.DataHandler.selected_consensus = event\r\n    } else {\r\n      return\r\n    }\r\n    if (params.full){\r\n      this.DataHandler.fullUpdate()\r\n    } else {\r\n      this.DataHandler.updateCells()\r\n    }\r\n    this.$emit('sliderUpdate', {value: this.DataHandler, target: 'DataHandler'})\r\n  }\r\n\r\n  async getData(value: any, type: string){\r\n    const $this = this\r\n    try{\r\n      await $this.DataHandler.getData(value, type)\r\n      return \r\n    } catch(err: any) {\r\n      console.log(\"errr found.....\")\r\n      $this.$swal.fire({\r\n          position: 'center',\r\n          icon: 'error',\r\n          showConfirmButton:true,\r\n          title:  \"JSON parsing error\",\r\n          text: err\r\n      });\r\n      throw err\r\n    }\r\n  }\r\n\r\n  mounted() {\r\n    this.getData(`${this.DataHandler.data_selected.id}/${this.DataHandler.data_selected.subfolder}/${this.segment}.json`, \"file\").then((d:any)=>{\r\n      this.DataHandler.fullUpdate()\r\n      this.$emit('sliderUpdate', {value: this.DataHandler, target: 'DataHandler'})\r\n    })\r\n  }\r\n  \r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualizationOptions.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualizationOptions.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VisualizationOptions.vue?vue&type=template&id=8e4a6694&scoped=true&\"\nimport script from \"./VisualizationOptions.vue?vue&type=script&lang=ts&\"\nexport * from \"./VisualizationOptions.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VisualizationOptions.vue?vue&type=style&index=0&id=8e4a6694&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8e4a6694\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\"}},[_c('b-row',[_c('b-col',{staticClass:\"col-lg-12 pb-1\"},[_c('div',{ref:\"heatmapDiv\",attrs:{\"id\":\"heatmapDiv\"}},[(!_vm.DataHandler || _vm.DataHandler.cells.length < 1)?_c('p',[_vm._v(\"No data available\")]):_vm._e(),_c('div',{staticClass:\"tooltip\",staticStyle:{\"opacity\":\"0\",\"font-size\":\"12px\",\"display\":\"block\"},attrs:{\"id\":\"tooltipHeatmap\"}},[_c('div',{attrs:{\"id\":\"tooltipcontent\"}}),_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.tooltiptable,\"fields\":[\n            {\n              key: 'aa',\n              label: 'AA'\n            },\n            {\n              key: 'proportion',\n              label: 'Proportion',\n            } ]}})],1)])]),_c('b-col',{staticClass:\"col-lg-12 pb-1\"},[_c('div',{ref:\"heatmapSlider\",attrs:{\"id\":\"heatmapSlider\"}})]),_c('b-col',{staticClass:\"col-lg-12 pb-1\"},[_c('div',{ref:\"heatmapLegend\",attrs:{\"id\":\"heatmapLegend\"}}),_c('b-button',{on:{\"click\":function($event){return _vm.downloadSVG()}}},[_vm._v(\"Save SVG\")]),_c('a',{attrs:{\"hidden\":\"\",\"id\":\"imgId\",\"target\":\"_blank\"}},[_vm._v(\"Save SVG\")]),_c('b-switch',{attrs:{\"hidden\":\"\",\"disabled\":!this.DataHandler.cells},model:{value:(_vm.isFlipped),callback:function ($$v) {_vm.isFlipped=$$v},expression:\"isFlipped\"}},[_vm._v(\" \"+_vm._s(( _vm.isFlipped ? 'Flip Axis' : 'Flip Axis' ))+\" \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nexport default class Parsing {\n\n  public totalwt2frac(d: any, frequency_threshold: number, depth_threshold: number)\n  {\n    //--------------------------------------------------------------------------------------------------\n      let max: number = -1;\n      let log_scale: number = 10\n      // console.log(d)\n      max = d.max\n      var frac = 0;\n      if ( d.total === 0 ) {\n        frac = -100;\n      } else if ( (max/d.total) < frequency_threshold) {\n      // } else if ( d.total < depth_threshold && (1-max/d.total) < frequency_threshold) {\n        frac = -200;\n      } else if ( max == d.total  ) {\n      // } else if ( max == d.total && d.total >= depth_threshold ) {\n        frac = -300;\n      } else if ( max != d.total && d.total < depth_threshold && (1-max/d.total) >= frequency_threshold ) {\n        frac = -400;\n      } else {\n        frac = (log_scale+Math.log10(1-max/d.total))/log_scale;\n      }\n      return frac;\n  }\n  public frac2rainbow(frac: number){\n    var color = '';\n    switch ( frac ) {\n            case -100:\n                    // there is no data at this point: total = 0\n                    color = 'rgb(' + Math.round(235) + ',' + Math.round(235) + ',' + Math.round(235) + ')';\n                    break;\n            case -200:\n                    // there is little data at this point: 0 < total < depth_thresh\n                    color = 'rgb(' + Math.round(185) + ',' + Math.round(185) + ',' + Math.round(185) + ')';\n                    break;\n            case -300:\n                    // there is enough data at this point, but zero mutations: total >= depth_thresh; wt = total\n                    color = 'rgb(' + Math.round(165) + ',' + Math.round(165) + ',' + Math.round(165) + ')';\n                    break;\n            case -400:\n                    // there is little data at this point, but a lot of mutations: total < depth_thresh; 1-wt/total > freq_thresh\n                    color = 'rgb(' + Math.round(65) + ',' + Math.round(65) + ',' + Math.round(65) + ')';\n                    break;\n            default:\n                    // there is data at this point, and at least one mutation: total > 0; wt != total\n                    var x = 0.25 + 0.75*frac;\n                    var r = 255 * (0.472 - 0.567*x + 4.05*Math.pow(x,2)) / (1 + 8.72*x - 19.17*Math.pow(x,2) + 14.1*Math.pow(x,3));\n                    var g = 255 * (0.108932 - 1.22635*x + 27.284*Math.pow(x,2) - 98.577*Math.pow(x,3) + 163.3*Math.pow(x,4) - 131.395*Math.pow(x,5) + 40.634*Math.pow(x,6));\n                    var b = 255 / (1.97 + 3.54*x - 68.5*Math.pow(x,2) + 243*Math.pow(x,3) - 297*Math.pow(x,4) + 125*Math.pow(x,5));\n                    if( r < 0 || g < 0 || b < 0 ){\n                            color = 'rgb(253,64,160)';\n                    } else {\n                            color = 'rgb(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ')';\n                    }\n                    break;\n    }\n    return color;\n}\n  \n} ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from \"vue-property-decorator\";\nimport LocalDataHelper from \"@/shared/LocalDataHelper\";\nimport Parsing from \"@/shared/Parsing\";\nimport * as d3 from \"d3\";\nimport swal from 'vue-sweetalert2'\nimport { BIconArrowReturnRight } from \"bootstrap-vue\";\nimport * as canvas from 'canvas'\nimport DataHandler from \"@/shared/DataHandler\";\n@Component({\n  components: {\n    \n  }\n\n})\nexport default class Heatmap extends Vue {\n\n  private localDataHelper = new LocalDataHelper();\n  private parsing = new Parsing();\n  private isFlipped = true\n  $refs!: {\n    heatmapDiv: HTMLElement;\n    heatmapLegend: HTMLElement;\n    heatmapSVG: HTMLElement;\n  };\n  @Prop({ required: false, default: 9 })\n  public column_width!: number;\n  @Prop({ required: true, default: null })\n  public DataHandler!: DataHandler;\n  @Prop({ required: false, default: true })\n  public isSwitched!: any;\n  @Prop({ required: false, default: true })\n  public sortBy!: any;\n  @Watch(\"sortBy\")\n  onSortByChanged(value: boolean, oldValue: boolean) {\n    this.updateHeatmap()\n  }\n  @Watch(\"isSwitched\")\n  onSwitchChanged(value: boolean, oldValue: boolean) {\n    console.log(\"switched\")\n    this.updateHeatmap()\n  }\n \n  changeDataHandler(){\n    this.defineHeatmap()\n  }\n  @Watch(\"column_width\")\n  onColWidthChanged(value: number, oldValue: number) {\n    console.log(\"col width changed\")\n    this.updateHeatmap()\n  }\n\n  parseError(err: any){\n    console.log(err)\n    if (err.toJSON){\n      return err.toJSON().message\n    } else {\n      return  err\n    } \n  }\n  downloadSVG(evt:any) {\n    var svg:any = document.querySelector(\"#innerheatmapSVG\");\n    var svg_xml = (new XMLSerializer()).serializeToString(svg),\n    blob = new Blob([svg_xml], {type:'image/svg+xml;charset=utf-8'}),\n    url = window.URL.createObjectURL(blob);\n    var img = new Image();\n    const w = this.oversize\n    const h = this.height\n    img.width = this.oversize;\n    img.height = h;\n    const $this = this\n    img.onload = function(){\n      var canvas:any = document.createElement('canvas');\n      d3.select('canvas').append(\"text\").attr('transform', `translate(${w/2},${$this.margin.top/2})`).text(\"yyyyyyyyyyyyyyyyyyyyyyyyyy\")\n      canvas.width = w;\n      canvas.height = h;\n\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0, w, h);\n      ctx.font = \"20px Arial\";\n      ctx.fillText($this.DataHandler.segment, w / 2 , $this.margin.top / 2)\n      window.URL.revokeObjectURL(url);\n      var canvasdata = canvas.toDataURL('image/jpeg');\n      var a: any = document.getElementById('imgId');\n      a.download = \"export_\" + Date.now() + \".jpeg\";\n      a.href=canvasdata;\n      a.click()  \n    }\n    img.src = url\n    \n  }\n\n  \n  customfile: any = null\n  scrollDirection: string = \"x\"\n  partitions = 1\n  position_max: number = 1\n  position_ranges: number[] = [1,this.position_max]\n  test = null;\n  reference_seq: any = [];\n  showMenu = false;\n  msg = \"Hello\";\n  tooltiptable: any = [];\n  height = 900;\n  boxHeight = 0;\n  width = 900;\n  boxWidth = 0;\n  oversize: number = 0;\n  border = 0;\n  svgs = {};\n  scaleX = d3.scaleBand();\n  scaleColor = d3.scaleLinear();\n  colors = { start: \"#fff\", end: \"#666699\" };\n  xAxisInner = {};\n  xAxisGroup = {};\n  xAxisGT: any = null;\n  xAxisGB: any = null;\n  yAxis: any = null;\n  yAxisG: any = null;\n  xAxisT: any = null;\n  xAxisB: any = null;\n  context: any  = null;\n  g: any  = null;\n  color_range = 4;\n  divisionYScale = {};\n  yAxisDivision = {};\n  scaleY: any= d3.scaleOrdinal();\n  positions_unique: any[] = [];\n  positions: any[] = [];\n  preps: any  = null;\n  containerHeight = 800;\n  chartHeight = Math.min(this.containerHeight * 1);\n  legendWidth = 0;\n  legendHeight = 0;\n  legendPadding = 15;\n  svg:any = null\n  margin = {\n    top: 0.13 * this.chartHeight,\n    bottom: 0.095 * this.chartHeight,\n    left: 0.2 * this.width,\n    right: 0.05 * this.width,\n  };\n  x: any = d3.scaleLinear()\n    \n\n  mounted() {\n    if (this.DataHandler.cells){\n      this.defineHeatmap()\n    }\n  }\n\n  defineHeatmap() {\n    console.log(\"define heatmap\")\n    try {\n      this.legendWidth = this.$refs.heatmapLegend.clientWidth;\n      this.width = this.$refs.heatmapDiv.clientWidth;\n    }catch (err){\n      console.log(err)\n    }\n    this.legendHeight = this.chartHeight / 20\n    this.height = Math.min(this.chartHeight);    \n    const border = this.border;\n    const margin = this.margin;\n    \n    d3.selectAll(\"#heatmapSVG\").remove()\n    d3.select(\"#overflowDiv\").remove()\n    d3.selectAll(\"#heatmapSliderSVG\").remove()\n    d3.selectAll(\"#heatmapLegend\").selectAll(\"*\").remove()\n    const segments = [\"HA\", \"M1\", \"NA\", \"NP\"];\n    const $this = this;\n    this.makeHeatmap(this.DataHandler.cells)\n  }\n  \n  makeHeatmap(cells: any) {\n    console.log(\"make heatmap\")\n    // Get unique positions in order to calculate positions axis\n    const position_max: any = d3.max(cells.map((d:any)=>{\n      return d.position \n    }));\n    this.position_max = position_max\n    // Get unique preps in order to calculate y axis\n    let preps: any = [...new Set(cells.map((d: any) => d.experiment))];\n    this.preps = preps\n    const axisPadding = 10\n    \n    this.position_ranges = [1, position_max]\n    if (this.scrollDirection == 'x'){\n      this.x.domain([0, position_max])\n      .range([this.margin.left, this.width * this.column_width - this.margin.right])\n      const minD = this.x(0);\n      const maxD = this.x(position_max);\n      this.oversize = maxD - minD + this.margin.left + this.margin.right;\n    } else {\n      this.x.domain([0, position_max])\n      .range([this.margin.top, this.height * this.column_width - this.margin.bottom])\n      const minD = this.x(0);\n      const maxD = this.x(position_max);\n      this.oversize = maxD - minD + this.margin.top + this.margin.bottom;\n    }\n    const heatmapdiv = d3.select(\"#heatmapDiv\")\n    const svg = heatmapdiv.append(\"svg\")\n      .attr(\"id\", \"heatmapSVG\")\n      .attr(\"ref\", \"heatmapSVG\")\n      .style(\"position\", \"absolute\")\n      .style(\"pointer-events\", \"none\")\n      .style(\"z-index\", 1)\n      .attr(\"viewBox\", `0 0 ${this.width} ${this.chartHeight}`)\n    this.svg = svg\n    const body = heatmapdiv.append(\"div\").attr(\"id\",\"overflowDiv\")\n      .style(\"overflow-x\", \"scroll\")\n      .style(\"height\", this.chartHeight)\n      \n\n    const innerSvg = body.append(\"svg\")\n      .style(\"fill\", \"white\")\n      .style(\"background\", \"white\")\n      .attr(\"id\", \"innerheatmapSVG\")\n      .style(\"display\", \"block\")\n\n    if (this.scrollDirection == 'x'){\n      innerSvg.attr(\"height\", this.chartHeight)\n    } else {\n      innerSvg.attr(\"width\", this.width)\n    }\n\n    const g = innerSvg.append(\"g\").attr(\"class\", \"svgG\")\n    this.g = g\n    const $this = this;\n    \n    \n    \n    this.xAxisGT = g.append(\"g\")\n    .attr(\"class\", \"xAxis\")\n    .attr(\"id\", \"xAxisT\")\n    this.xAxisGB = g.append(\"g\").attr(\"class\", \"xAxis\")\n    .attr(\"id\", \"xAxisB\")\n    \n    this.yAxisG = g.append(\"g\").attr(\"class\", \"yAxis\").attr(\"id\", \"yAxis\")\n          \n\n    let legendVals = [];\n    for (let i = -5; i <= 0; i+=0.25) {\n      legendVals.push(i)\n    }\n    const legend_margin: number= this.legendWidth - this.legendPadding\n    const boxWidth = this.legendWidth / 4 / legendVals.length\n    const legend_BoxHeight = this.legendHeight - this.legendPadding\n    d3.select('#heatmapLegend')\n    .append(\"svg\")\n    .attr(\"viewBox\", `0 0 ${this.legendWidth} ${this.legendHeight}`)\n    .attr(\"transform\", `translate(${0},${this.legendPadding})`)\n    .append(\"g\")\n    .attr(\"class\", \"legendG\")\n    .attr(\"transform\", `translate(${this.legendWidth / 2},${0})`)\n    .selectAll(\"rect\")\n    .data(legendVals).enter().append(\"rect\")\n    .attr(\"stroke-width\", 0)\n    .attr(\"x\", (d:any, i:number)=>{\n      return (boxWidth* i ) \n    })\n    .attr(\"y\",  0)\n    .attr(\"id\", (d:any)=>{\n      return \"_\"+String(d).replace(\"-\", \"_\").replace(\".\", \"_\")\n    })\n    .attr(\"width\", boxWidth)\n    .attr(\"height\", legend_BoxHeight) \n    .style(\"fill\", (d:any)=>{\n      const frac = (d + 3.5 ) / 3.5    \n      let col = this.frac2Color(frac)\n      return col\n    })\n    .on(\"mouseenter\", (d:any, u:any)=>{\n      d3.select(\"#_\"+String(u).replace(\"-\", \"_\").replace(\".\", \"_\"))\n      .attr(\"stroke-width\", 2)\n      .attr(\"stroke\", \"#000\")\n      const fract = (u + 3.5 ) / 3.5 \n      d3.selectAll(\".block\")\n      .style(\"fill\", (block:any, i:any)=>{\n        if (this.getFrac(block) >= fract){\n          return \"rgb(217, 33, 32)\"\n        } else{\n          return this.calculateColor(block)\n        }\n        \n      })\n    })\n    .on(\"mouseleave\", (d:any, u:any)=>{\n      d3.select(\"#_\"+String(u).replace(\"-\", \"_\").replace(\".\", \"_\"))\n      .attr(\"stroke-width\", 0)\n      d3.selectAll(\".block\")\n      .style(\"fill\", (block:any, i:any)=>{\n        return this.calculateColor(block)\n      })\n    })\n    .style(\"cursor\", \"pointer\")\n    .append(\"title\")\n    .attr(\"class\", \"tt\").text((d:number)=>{\n      let cutoff = Math.round(3-Math.log10(Math.pow(10,d)));\n      return (Math.pow(10,d)*100).toString().substring(0,cutoff)+\"%\";\n    })\n    const legendScaleY: any = d3.scaleLinear().domain([-5, 0]).range([boxWidth / 2, (boxWidth * legendVals.length ) - boxWidth/2   ])\n    const legendYAxis: any = d3.axisBottom(legendScaleY)\n    .ticks(6)\n    .tickFormat((d:any,i:any) => {\n      const val: any= parseFloat((Math.pow(10,d)*100).toFixed(3) )\n      return ((val > 0.01 ? val : val.toExponential()) + \"%\")\n    });\n    d3.select(\"#heatmapLegend\").select(\".legendG\")\n      .append(\"g\")\n      .attr(\"class\", \"legendyAxis\")\n      .attr(\"id\", \"legendyAxis\")\n      .attr(\"transform\", \"translate(\" + (0) + \",\" + legend_BoxHeight+ \")\")\n      .style(\"stroke-width\", 1)\n      .call(legendYAxis)\n      .selectAll('text')\n      .style('text-anchor', 'start')\n      .attr('transform', 'rotate(0)').style(\"font-size\", \"0.79em\")\n    d3.select(\"#heatmapLegend\")\n      .select(\"svg\")\n      .append(\"text\")\n      .attr(\"x\", (this.legendWidth/2 ) - (this.legendPadding))\n      .attr(\"y\", this.legendPadding)\n      .attr(\"dy\", \"-0.25em\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"transform\", \"rotate(0)\")\n      .attr(\"id\", \"legendYAxisTitle\")\n      .attr(\"font-size\", \"0.8em\")\n      .text(\"Relative Depth of Mutations\")\n    \n    //Now make the brushable \n    let contextheight = 70\n    this.context = d3.select(\"#heatmapSlider\")\n    .append(\"svg\").attr(\"id\", \"heatmapSliderSVG\")\n    .attr(\"viewBox\", `0 0 ${this.width} ${contextheight}`)\n    .append(\"g\")\n    .attr(\"class\", \"context\")\n    .attr(\"transform\", `translate(${0},${0})`)\n    let scaleX = d3.scaleLinear().domain([0, position_max])\n    .range([0, this.width])\n    let boxHeight = contextheight / preps.length\n    let scaleY = d3.scaleOrdinal().domain(preps)\n    .range(preps.map((d: any, i: number) => {\n        const spacing = boxHeight / 2;\n        return (i * boxHeight ) ;\n      })\n    );    \n    let subBars = this.context.selectAll(\".subBar\").data(this.DataHandler.cells_full)\n    .join(\n      function (enter: any) {\n        return enter\n        .append(\"rect\")\n\t\t    .classed('subBar', true)\n        .attr(\"transform\", (d: any, i: any) => {\n          return \"translate(\" + scaleX(d.position) + \",\" + scaleY(d.experiment) + \")\";\n        })\n             \n        .style(\"cursor\", \"pointer\")\n        .attr(\"width\", $this.width / position_max )\n        .attr(\"height\",  boxHeight )\n        .attr(\"fill\", (d: any) => {\n          return $this.calculateColor(d)\n        })\n      },\n      function (update: any){\n        return update\n        .attr(\"transform\", (d: any, i: any) => {\n          return \"translate(\" + scaleX(d.position) + \",\" + scaleY(d.prep) + \")\";\n        })\n        .attr(\"fill\", (d: any) => {\n          return $this.calculateColor(d)\n        })\n      },\n      function (exit: any) {\n        return exit.remove()\n      }\n    )\n    var brush: any= d3.brushX()\n    .extent([[0, 0], [this.width, contextheight]])\n    .on(\"end\", brushended)\n    // .on(\"brush\", brushed);\n    function brushended(event: any) {\n      if (event && !event.selection) {\n        $this.DataHandler.updatePositions(d3.extent($this.DataHandler.cells_full, (d:any)=>{return d.position}))\n        $this.DataHandler.updateCells()\n        $this.updateHeatmap()\n      } else {\n        brushed(event)\n      }\n    }\n    this.context.append(\"g\")\n      .attr(\"class\", \"x brush\")\n      .call(brush)\n      .selectAll(\"rect\")\n      .attr(\"y\", -6)\n      .attr(\"height\", contextheight + 7);\n    function brushed({selection}:any) {\n      if (selection){\n      let ranges: any = selection.map(scaleX.invert, scaleX).map((d:any) => { return Math.round(d) })\n      $this.DataHandler.updatePositions(ranges)\n      $this.DataHandler.updateCells()\n      }\n      $this.updateHeatmap()\n    }\n    this.updateHeatmap()\n  }\n\n  updateHeatmap() {\n    // Add styling to the heatmap blocks\n    console.log(\"update heatmap\")\n    let scrollAttr: any  = { x: null, y: null, marginA: null, marginB: null }    \n    const g = this.g\n    const $this = this\n    let cells: any = this.DataHandler.cells\n    this.position_ranges = this.DataHandler.position_ranges\n    if (this.isSwitched){\n      // Get unique positions in order to calculate x axis\n      const positions: any[] = [...new Set(cells.map((d:any)=>{\n        return d.position \n      }))];\n      const positions_unique = this.DataHandler.selected_consensus.residues\n      this.positions_unique = positions_unique.filter((d:any, i:any)=>{\n        return i+1 >= this.DataHandler.position_ranges[0] && i+1 <= this.DataHandler.position_ranges[1]\n      })\n      this.positions = positions\n    } else {\n      let positions: any = this.DataHandler.referenceSequence\n      // const positions: any[] = this.DataHandler.referenceSequence.positions\n      this.positions = positions.filter((d:any)=>{\n        return +d.position >= this.DataHandler.position_ranges[0] && +d.position <= this.DataHandler.position_ranges[1]\n      })\n      this.positions_unique = this.positions.map((d:any)=>{\n        return `${d.aa}.${d.position}`\n      })\n      this.positions = this.positions.map((d:any)=>{\n        return d.position\n      })\n      cells = cells.filter((d:any)=>{ return this.positions.indexOf(d.position) > -1  })\n    }\n    const min = Math.max(this.DataHandler.position_ranges[0], d3.min($this.positions))\n    const max = Math.min(this.position_max, d3.max($this.positions))\n    this.positions = this.positions.filter((d:any)=>{ return d <= max && d >= min})\n    if (this.scrollDirection == 'x'){\n      scrollAttr['x'] = this.positions\n      scrollAttr.xTicks = this.positions_unique\n      scrollAttr['y'] = this.preps\n      scrollAttr.marginA = this.margin.left\n      scrollAttr.marginB = this.margin.right\n      scrollAttr.long =  this.width     \n    } else {\n      scrollAttr['x'] = this.preps\n      scrollAttr['y'] = this.positions\n      scrollAttr.long =  this.height\n      scrollAttr.xTicks = this.preps\n      scrollAttr.marginA = this.margin.top\n      scrollAttr.marginB = this.margin.bottom\n    }\n    let boxHeight = (this.height - this.margin.top - this.margin.bottom )/ scrollAttr.y.length \n    this.boxHeight = boxHeight;\n    this.x.domain([min, max])\n    .range([scrollAttr.marginA, ( scrollAttr.long ) * this.column_width - scrollAttr.marginB])\n    const minD = this.x(min);\n    const maxD = this.x(max);\n    const over = maxD - minD + scrollAttr.marginA + scrollAttr.marginB;\n    this.oversize = over\n    const boxWidth =\n      (over - scrollAttr.marginA - scrollAttr.marginB) / scrollAttr[this.scrollDirection].length -\n      this.border;\n    this.boxWidth = boxWidth;\n    this.scaleX\n      .domain(scrollAttr.x)\n      .range([scrollAttr.marginA, over - scrollAttr.marginB]);\n    if (! this.sortBy){\n      try {\n        scrollAttr.y = scrollAttr.y.sort((a: any, b:any) => {\n          let datea = a.split(\"-\")\n          let dateb = b.split(\"-\")\n          return datea[datea.length -1].localeCompare(dateb[dateb.length -1])\n        })\n      } catch(err){\n        console.log(err)\n        scrollAttr.y = scrollAttr.y.sort()\n      }\n    } else {\n      scrollAttr.y = scrollAttr.y.sort()\n    }\n    this.scaleY.domain(scrollAttr.y).range(\n      scrollAttr['y'].map((d: any, i: number) => {\n        const spacing = this.boxHeight / 2;\n        return (i * this.boxHeight ) + this.margin.top;\n      })\n    );\n    this.yAxis = d3.axisLeft(this.scaleY)\n          .ticks(scrollAttr.y.length);\n    this.xAxisT = d3\n      .axisTop(this.scaleX)\n      .tickSizeOuter(0)\n      .ticks(max-min)\n      .tickFormat((interval:any,i:any) => {\n        return i%2 !== 0 ? \" \": scrollAttr.xTicks[i];\n      });\n    this.xAxisB = d3\n    .axisBottom(this.scaleX)\n    .tickSizeOuter(0)\n    .ticks(max-min)\n    .tickFormat((interval:any,i:any) => {\n      return i%2 !== 1 ? \" \": scrollAttr.xTicks[i];\n    });\n    let scaleYText: any = d3.select(\"#yAxis\")\n          .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + (this.boxHeight/2)+ \")\")\n          .style(\"stroke-width\", 0)\n          .call(this.yAxis)\n          .call(g => g.select(\".domain\").remove())\n          .selectAll('text')\n          .classed(\"scaleYText\", true)\n          .style('text-anchor', 'end')\n          .attr('transform', 'rotate(0)')\n          .style(\"font-size\", \"1em\")\n    \n    let scaleXTestT: any = d3.select('#xAxisT')\n          .attr(\"transform\", \"translate(\" + (0) + \",\" + (this.margin.top) + \")\")\n          .style(\"fill\", null)\n          .style(\"stroke-width\", 0.2)\n          .call(this.xAxisT)\n          .selectAll('text')\n          .attr(\"y\", -9)\n          .attr(\"x\", 0)\n          .attr(\"dy\", \".35em\")\n          .attr(\"transform\", \"rotate(45)\")\n          .style(\"text-anchor\", \"end\")\n          .style(\"font-size\", \"1em\");\n    let scaleXTestB: any = d3.select('#xAxisB')\n          .attr(\"transform\", \"translate(\" + (0) + \",\" + (this.chartHeight - this.margin.bottom) + \")\")\n          .style(\"fill\", null)\n          .style(\"stroke-width\", 0.2)\n          .call(this.xAxisB)\n          .selectAll('text')\n          .classed(\"scaleXText\", true)\n          // .attr(\"y\", 0)\n          // .attr(\"x\", 9)\n          // .attr(\"dy\", \".35em\")\n          .attr(\"transform\", \"rotate(45)\")\n          .style(\"text-anchor\", \"start\")\n          .style(\"font-size\", \"1em\");\n    \n    \n    try {\n      let maxYTick: any = d3.max(scaleXTestB.nodes().map((d:any)=>{\n          return d.getBBox().height\n        })\n      )\n      scaleYText.style(\"font-size\", Math.min(maxYTick, boxHeight))\n      let maxXTick: any = d3.max(scaleXTestB.nodes().map((d:any)=>{\n          return d.getBBox().width\n        })\n      )\n      if (maxXTick > boxWidth){\n        scaleXTestB.style(\"font-size\", Math.min(maxXTick, boxWidth))\n        scaleXTestT.style(\"font-size\", Math.min(maxXTick, boxWidth))\n      }      \n    } catch(err: any){\n      console.error(err)\n    }\n    d3.select('#innerheatmapSVG')\n    .attr(\"width\", over)\n    .style(\"fill\", \"white\")\n    const blocks = g.selectAll(\".block\")\n    .data(cells, (d:any, i:any)=>{\n        \"_\"+d.experiment.replaceAll(\" \", \"_\").replaceAll(\"-\", \"_\") + d.position +d.prep_id+ $this.DataHandler.segment\n    })\n    .join(\n      function (enter: any) {\n            return enter\n              .append(\"rect\")\n              .attr(\"id\", (d: any) => {\n                return (\n                  \"_\"+d.experiment.replaceAll(\" \", \"_\").replaceAll(\"-\", \"_\") + d.position\n                );\n              })\n              .attr(\"fill\", (d: any) => {\n                return $this.calculateColor(d)\n              })\n              .attr(\"transform\", (d: any) => {\n                let x: any; let y: any;\n                if ($this.scrollDirection == 'x'){\n                  y = $this.scaleY(d.experiment);\n                  x = $this.scaleX(d.position);\n                } else {\n                  x = $this.scaleY(d.experiment);\n                  y = $this.scaleX(d.position);\n                }\n                return \"translate(\" + x + \",\" + y + \")\";\n              })\n              .attr(\"class\", \"block\")\n              .style(\"cursor\", \"pointer\")\n              .attr(\"width\", $this.boxWidth )\n              .attr(\"height\", $this.boxHeight)\n              .on(\"click\", (d:any, u:any)=>{\n                $this.DataHandler.selectedPosition = u.position\n                $this.$emit(\"changePosition\", u.position)\n              })\n              .on(\"mousemove\", (event: any, u: any, n:any, i:number) => {\n                $this.highlightCell(event, u)\n              })\n              .on(\"mouseleave\", (d: any, u: any) => {\n                $this.unHighlight(event, u)\n              });\n          },\n          function (update: any) {\n            return update\n            .call((update: any)=>update.transition().duration(1000).attr(\"fill\", (d: any) => {\n              return $this.calculateColor(d)\n            })\n            .attr(\"transform\", (d: any) => {\n              let x: any; let y: any\n              if ($this.scrollDirection == 'x'){\n                y = $this.scaleY(d.experiment);\n                x = $this.scaleX(d.position);\n              } else {\n                x = $this.scaleY(d.experiment);\n                y = $this.scaleX(d.position);\n              }\n              return \"translate(\" + x + \",\" + y + \")\";\n            })\n            .attr(\"width\", $this.boxWidth )\n            )            \n          },\n          function (exit: any) {\n            return exit.remove()\n          }\n        )\n  }\n  highlightCell(event: any, u: any){\n    const $this = this\n    d3.select(\n      \"#\" +\n        \"_\"+u.experiment.replaceAll(\" \", \"_\").replaceAll(\"-\", \"_\") + u.position \n    )\n    .style(\"fill\", \"yellow\");\n    const ratio: number = (u.max / u.depth)\n    $this.focusColumn(u.position, false)\n\n    d3.select(\"#tooltipHeatmap\")\n      .style(\n        \"left\",\n        () => {\n          const w: any = (d3.select(\"#tooltipHeatmap\").node() ? (d3.select(\"#tooltipHeatmap\").node() as any).getBoundingClientRect().width : 0 )\n          return ( d3.pointer(event, $this.svg.node() )[0] - w ) + \"px\"\n        }\n      )\n      .style(\n        \"top\",\n        () => {\n          const h: any = (d3.select(\"#tooltipHeatmap\").node() ? (d3.select(\"#tooltipHeatmap\").node() as any).getBoundingClientRect().height : 0 )\n          return (d3.pointer(event, $this.svg.node() )[1] -h / 2  ) + \"px\"\n        }\n      )\n      .style(\"opacity\", \"1\").select(\"#tooltipcontent\")\n      .html(`Pos: ${u.position}<br>\n      Experiment: ${u.experiment}<br>\n      Depth: ${u.depth}<br>\n      Total: ${u.total}<br>\n      Consensus Residue: ${u.aa}<br>\n      Consensus / Total: ${ratio.toFixed(3)} ${( !$this.isSwitched ? `<br>Ref. Residue: ${$this.positions_unique[$this.positions.indexOf(u.position)]}`: '')} `)\n      $this.tooltiptable = u.unique.map((d:any)=>{\n        if (d.aa == u.aa){\n          d._rowVariant = 'info'\n        } else if (ratio <= d.proportion){\n          d._rowVariant = 'danger'\n        }\n        return d\n      })\n  }\n  unHighlight(event: any, u: any){\n    const $this = this\n    d3.select(\n      \"#\" +\n        \n        \"_\"+u.experiment.replaceAll(\" \", \"_\").replaceAll(\"-\", \"_\") + u.position\n    )\n    .style(\"fill\", (d: any) => {\n      return $this.calculateColor(d)\n    });\n    this.unfocusColumn(u.position)\n    d3.select(\"#tooltipHeatmap\").style(\"opacity\", \"0\");\n  }\n  focusColumn(position: any, focus: boolean){\n    let scaleXpost: any = this.scaleX(position)\n    let listScales: any[] = [scaleXpost, scaleXpost + this.boxWidth] \n    d3.selectAll(\".focus\").remove()\n    let minMax: any[] = d3.extent(this.scaleY.range())\n    this.g.selectAll(\".focus\").data(listScales).enter().append(\"line\")\n    .attr(\"x1\", (d:any)=>{return d})\n    .attr(\"x2\",(d:any)=>{return d})\n    .attr(\"y1\", minMax[0] )\n    .style(\"stroke\", \"black\")\n    .style(\"stroke-width\", 0.5)\n    .attr(\"y2\", this.boxHeight + minMax[1] )\n    .attr(\"class\", \"focus\")\n    if (focus){\n      let obj: any = document.querySelector(\"#overflowDiv\")\n      if (obj){\n        let post: any = this.scaleX(position.toString())\n        obj.scrollLeft = post - this.width/2\n      }\n    }\n  }\n  unfocusColumn(position:number){\n    d3.selectAll(\".focus\").remove()\n  }\n  frac2Color(frac: number){\n    let color = '';\n    const x = 0.25 + 0.75*frac;\n    const r = 255 * (0.472 - 0.567*x + 4.05*Math.pow(x,2)) / (1 + 8.72*x - 19.17*Math.pow(x,2) + 14.1*Math.pow(x,3));\n    const g = 255 * (0.108932 - 1.22635*x + 27.284*Math.pow(x,2) - 98.577*Math.pow(x,3) + 163.3*Math.pow(x,4) - 131.395*Math.pow(x,5) + 40.634*Math.pow(x,6));\n    const b = 255 / (1.97 + 3.54*x - 68.5*Math.pow(x,2) + 243*Math.pow(x,3) - 297*Math.pow(x,4) + 125*Math.pow(x,5));\n    if( r < 0 || g < 0 || b < 0 ){\n      color = 'rgb(253,64,160)'\n    } else {\n      color = 'rgb(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ')';\n    }\n    return color\n  }\n\n  getFrac(d:any){\n    const log_scale = 4\n    const max = d.max\n    return(log_scale+Math.log10(1-max/d.total))/log_scale;\n  }\n  // pretty close to exactly Tom's color code\n  calculateColor(d: any) {\n\n   \tconst depth_thresh = this.DataHandler.depth_threshold\n    const freq_thresh = this.DataHandler.frequency_threshold\n    const max = d.max\n    let color = '';\n    let colors: string[] = [\n      'rgb(' + Math.round(235) + ',' + Math.round(235) + ',' + Math.round(235) + ')',\n      'rgb(' + Math.round(185) + ',' + Math.round(185) + ',' + Math.round(185) + ')',\n      'rgb(' + Math.round(165) + ',' + Math.round(165) + ',' + Math.round(165) + ')',\n      'rgb(' + Math.round(65) + ',' + Math.round(65) + ',' + Math.round(65) + ')',\n      'rgb(253,64,160)'\n    ] \n    if ( d.total === 0 ) {\n      // there is no data at this point: total = 0\n      color = colors[0]\n\n    // } else if ((1-max/d.total) < freq_thresh) {\n    } else if ( d.total < depth_thresh && (1-max/d.total) < freq_thresh) {\n      // there is little data at this point: 0 < total < depth_thresh\n      color = colors[1]\n\n    } else if ( max == d.total && d.total >= depth_thresh ) {\n      // there is enough data at this point, but zero mutations: total >= depth_thresh; wt = total\n      color = colors[2]\n\n    } else if ( (max != d.total && d.total < depth_thresh && (1-max/d.total) >= freq_thresh ) || max == d.total && d.total < depth_thresh ) {\n      // there is little data at this point, but a lot of mutations: total < depth_thresh; 1-wt/total > freq_thresh\n      color = colors[3]\n\n    } else {\n      const frac = this.getFrac(d)\n      // const frac = 0.25 + 0.75*(1-max/d.total)\n      const scale:any = [ '#82e09b', '#a82716' ]\n      // const scale:any = ['rgb(67.55129842486164,124.14024251953126,191.36399613050745)', 'rgb(16.88709677419362,32.7884100000022,31.8352059925094']\n      const scaleLog:any = d3.scaleSequentialLog([0.25, 1], scale)\n      // there is data at this point, and at least one mutation: total > 0; wt != total\n      color = this.frac2Color(frac)\n      // color = scaleLog(frac)\n\n    }\n    return color;\n\n  }\n\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Heatmap.vue?vue&type=template&id=97c91e0c&\"\nimport script from \"./Heatmap.vue?vue&type=script&lang=ts&\"\nexport * from \"./Heatmap.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',[_c('b-col',{staticClass:\"col-lg-12 pb-1\"},[_c('div',{},[_c('b-field',{attrs:{\"label\":this.title}}),_c('div',[_c('b-input-group',{staticClass:\"mt-3\",attrs:{\"prepend\":\"PDB ID\"}},[_c('b-form-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.protein),callback:function ($$v) {_vm.protein=$$v},expression:\"protein\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"elevation\":\"2\"},on:{\"click\":function($event){_vm.proteinChange(_vm.protein.toLowerCase())}}},[_vm._v(\"Change Protein\")])],1)],1)],1),_c('div',{ref:\"viewer\",staticClass:\"viewer\"}),_c('b-field',{staticClass:\"column is-narrow pl-0\",attrs:{\"label\":\"Molecule Structure\"}},[_c('b-switch',{model:{value:(_vm.isSwitched),callback:function ($$v) {_vm.isSwitched=$$v},expression:\"isSwitched\"}},[_vm._v(\" \"+_vm._s(( _vm.isSwitched ? 'Biological Assembly' : 'Asymmetric Unit' ))+\" \")])],1),(_vm.queryingReferenceSequence)?_c('b-field',{attrs:{\"label\":\"Querying Reference Sequence...\"}}):_vm._e(),(_vm.queryingResidueMapping)?_c('b-field',{attrs:{\"label\":\"Querying Residue Mapping..\"}}):_vm._e(),(_vm.chain_focus)?_c('b-field',{staticClass:\"column is-narrow\",attrs:{\"label\":'Chains at '+this.localPosition}},[_c('b-select',{attrs:{\"placeholder\":\"Chain\",\"options\":_vm.available_focus_chains},on:{\"change\":function($event){return _vm.focus()}},model:{value:(_vm.chain_focus),callback:function ($$v) {_vm.chain_focus=$$v},expression:\"chain_focus\"}})],1):_vm._e()],1)]),_c('b-col',{staticClass:\"col-lg-12 pb-1\"},[_c('BindingSites',{attrs:{\"positions\":_vm.positions,\"chains\":_vm.chains},on:{\"siteHover\":_vm.siteHover}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[(_vm.ligands && _vm.ligands.length > 0)?_c('b-table',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.right\",modifiers:{\"hover\":true,\"right\":true}}],staticStyle:{\"cursor\":\"pointer\"},attrs:{\"hover\":\"\",\"items\":_vm.ligands,\"sticky-header\":\"22rem\",\"title\":\"Click to view in heatmap and molecule viewer\",\"fields\":[\n      \n      {\n        key: 'startIndex',\n        label: 'Start Index',\n        sticky: true\n      },\n      {\n        key: 'endIndex',\n        label: 'End Index',\n        sticky: true\n      },\n      {\n        key: 'dataType',\n        label: 'Type',\n        sticky: true\n      },\n      {\n        key: 'startCode',\n        label: 'Start',\n        sticky: true\n      },\n      {\n        key: 'endCode',\n        label: 'End',\n        sticky: true\n      },\n      {\n        key: 'name',\n        label: 'Name',\n        sticky: true\n      },\n      {\n        key: 'entity',\n        label: 'Chain',\n        sticky: true\n      }\n    ]},on:{\"row-clicked\":_vm.rowClicked}}):(_vm.ligandQuerying)?_c('p',{staticClass:\"warning\"},[_vm._v(\"Getting Ligand information\")]):_c('p',{staticClass:\"warning\"},[_vm._v(\"No ligand information available\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator'\nimport axios from 'axios'\nimport swal from 'vue-sweetalert2'\n\n@Component({})\nexport default class BindingSites extends Vue {\n\n  ligands: any[] = []\n  ligandQuerying = false\n  @Prop({ required: true, default: 6 })\n  public chains!: any;\n  @Watch(\"chains\", {deep:true})\n  onColWidthChanged(value: any, oldValue: any) {\n    this.queryLigands(value)\n  }\n  mounted(){\n    this.queryLigands(this.chains)\n  }\n  async getdata(string:string){\n    let response = await axios\n      .get(string)\n    return response\n  }\n  rowClicked(item: any){\n    let event: any = item\n    event.focus = true\n    this.$emit('siteHover', item)\n  }\n  rowunHovered(item: any){\n    let event: any = item\n    event.focus = false\n    this.$emit('siteHover', item)\n  }\n  async queryLigands(chains: any){\n    let promises: any[] = []\n    let ligands: any[] = []\n    this.ligandQuerying = true\n    chains.entities.forEach((d:any)=>{\n      promises.push(this.getdata(`https://www.ebi.ac.uk/pdbe/graph-api/pdbe_pages/binding_sites/${chains.id}/${d}`))\n    })\n    Promise.allSettled(promises).then((responses:any)=>{\n      responses.forEach((response:any)=>{\n        if (response.status == 'fulfilled'){\n          if (response.value.data){\n            let data:any = response.value.data\n            data[chains.id].data.forEach((f:any)=>{\n              f.residues.map((g:any, i: any)=>{ \n                g.entity = f.additionalData.entityId\n                g.name = f.accession\n                g.dataType = f.dataType\n                return g\n              })\n              ligands.push(...f.residues)\n            })\n          }\n        }\n      })\n      this.ligands = ligands\n      this.ligandQuerying = false\n    }).catch((err:any)=>{\n      console.log(err)\n    })\n  }\n\n  \n\n\n}\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindingSites.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindingSites.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BindingSites.vue?vue&type=template&id=6cb02645&\"\nimport script from \"./BindingSites.vue?vue&type=script&lang=ts&\"\nexport * from \"./BindingSites.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n\r\nimport { Component, Vue, Watch, Prop } from 'vue-property-decorator'\r\nimport axios from 'axios'\r\nimport swal from 'vue-sweetalert2'\r\nimport DataHandler from \"@/shared/DataHandler\";\r\nimport BindingSites from '@/components/BindingSites.vue'\r\ninterface Residue {\r\n  chain: string\r\n  position: number\r\n  entity: string\r\n}\r\n\r\n@Component({\r\n  components: {\r\n    BindingSites\r\n  }\r\n})\r\nexport default class MoleculeViewer extends Vue {\r\n\r\n  public viewer: any;\r\n  public chain_focus: any = null \r\n  public entity_focus:any = null;\r\n  \r\n  public available_focus_chains: any[] = []\r\n  public protein: string = \"\";\r\n  public map_positions:any = {}\r\n  public queryingResidueMapping: boolean = false;\r\n  public queryingReferenceSequence: boolean = false;\r\n  public localPosition: number =  55;\r\n  public referenceSequence: any[] = []\r\n  public isSwitched = true\r\n  public assemblyId = \"1\"\r\n  public positions: any[] = [];\r\n  public chains: any = {id: null,  entities: [] };\r\n  public protein_per_segment: any = {\r\n    \"H3N2\": {\r\n      \"HA\": '4o5n',\r\n      \"NP\": '1hoc',\r\n      \"NA\": '2hty',\r\n      'M1': '5v6g',\r\n      'M': '5v6g',\r\n      'PB1': '6qx3',\r\n      'PB2': '6euv',\r\n      'NS': '6qxe',\r\n      'PA': '2w69'\r\n    },\r\n    \"H1N1\": {\r\n      \"HA\": '3al4',\r\n      \"NP\": '5b7b',\r\n      \"NA\": '3nss',\r\n      'M1': '3md2',\r\n      'M': '3md2',\r\n      'PB1': '2ztt',\r\n      'PB2': '2ztt',\r\n      'NS': '6dgk',\r\n      'PA': '5des'\r\n    }\r\n  }\r\n  \r\n  @Prop({ required: true, default: 55 })\r\n  public position!: string;\r\n  @Prop({ required: true, default: 'HA' })\r\n  public segment!: string;\r\n\r\n  @Prop({ required: true, default: null })\r\n  public DataHandler!: DataHandler\r\n\r\n  public title: string = \"No title found\"\r\n\r\n  @Watch('position')\r\n  onPositionChanged(value: number, oldValue: number) {\r\n    this.localPosition = value\r\n    // this.chain_focus = null\r\n    this.focus()\r\n  }\r\n  \r\n  @Watch('referenceSequence', { immediate: true, deep: true })\r\n  onRefSeqChange(value: any, oldValue: any) {\r\n    if (value.length > 0){\r\n      this.$emit(\"changeReferenceSequence\", value)\r\n    }\r\n  }\r\n\r\n  @Watch('segment')\r\n  onSegmentChanged(value: number, oldValue: number) {\r\n    console.log(\"new segment\", value)\r\n    this.proteinChange(this.protein_per_segment[this.DataHandler.subtype][this.segment])\r\n  }\r\n\r\n  @Watch('DataHandler.subtype')\r\n  onDataChanged(value: any, oldValue: any){\r\n    this.proteinChange(this.protein_per_segment[value][this.segment])\r\n  }\r\n\r\n  @Watch('isSwitched')\r\n  onSwitchToggled(value: any, oldValue: any) {\r\n    if(value === true) {\r\n      this.assemblyId = \"1\"\r\n    } else {\r\n      this.assemblyId = \"preffered\"\r\n    }\r\n    this.proteinChange(this.protein_per_segment[this.DataHandler.subtype][this.segment])\r\n  }\r\n  siteHover(item: any){\r\n    this.localPosition = item.endIndex + this.map_positions[item.entity].positions[1]\r\n    this.focus()\r\n    if (this.localPosition >= this.DataHandler.position_ranges[0]\r\n      && this.localPosition <= this.DataHandler.position_ranges[1]){\r\n      item.position  = this.localPosition\r\n      \r\n      this.$emit(\"siteHover\", item)\r\n    }\r\n  }\r\n  \r\n  parseError(err: any){\r\n    console.log(err)\r\n    if (err.toJSON){\r\n      return err.toJSON().message\r\n    } else {\r\n      return  err\r\n    } \r\n  }\r\n\r\n  proteinChange(value: string){\r\n    this.chain_focus = null\r\n    const options: any= {\r\n      moleculeId: value,\r\n      assemblyId: this.assemblyId,\r\n      hideControls: true,\r\n      bgColor: {r:255, g:255, b:255}\r\n    }\r\n    this.queryAPI(options)\r\n    this.viewer.visual.update(options)\r\n    // Remove some buttons that break everything\r\n    this.removeButtons();\r\n  }\r\n\r\n  reportError(err:any, title: string){\r\n    const error = this.parseError(err) \r\n    this.$swal.fire({\r\n      position: 'center',\r\n      icon: 'error',\r\n      showConfirmButton:true,\r\n      title:  title,\r\n      text: error\r\n    });\r\n  }\r\n\r\n  async queryAPI(options:any){\r\n    let error: any = null\r\n    try {\r\n      // https://www.ebi.ac.uk/pdbe/graph-api/pdbe_pages/uniprot_mapping/4o5n/1\r\n      this.queryingResidueMapping = true;\r\n      // throw new Error(\"new err\")\r\n      let response: any = await this.getdata(`https://www.ebi.ac.uk/pdbe/graph-api/mappings/uniprot_segments/${options.moleculeId}`)\r\n      this.title = \"Fetching...\"\r\n      // console.log(\"Querying API call finished\", response)\r\n      this.map_positions = {}\r\n      if (\r\n        response.data && \r\n        response.data[options.moleculeId] && \r\n        response.data[options.moleculeId].UniProt){\r\n        let data: any = response.data[options.moleculeId].UniProt;\r\n        const uniprots = Object.keys(response.data[options.moleculeId].UniProt)\r\n        let sum = 1;\r\n        \r\n\r\n        uniprots.forEach((accession: any)=>{\r\n          if (data[accession].mappings){\r\n            const mappings: any = data[accession].mappings\r\n            this.chains = {\r\n              id: options.moleculeId,\r\n              entities: [...new Set(mappings.map((d: any) => d.entity_id))]\r\n            }\r\n            mappings.forEach((mapping:any)=>{\r\n              if (! this.map_positions.hasOwnProperty(mapping.entity_id)){\r\n                this.map_positions[mapping.entity_id] = { chains: [], positions: []}\r\n              }\r\n              this.map_positions[mapping.entity_id].chains.push(mapping.struct_asym_id) \r\n              this.map_positions[mapping.entity_id].positions = [mapping.start.residue_number, mapping.unp_start - mapping.start.residue_number, mapping.end.residue_number, mapping.unp_end - mapping.start.residue_number +1 ]\r\n            })        \r\n          }\r\n          \r\n        })\r\n        const keys: any[] = Object.keys(this.map_positions).sort()\r\n        let position: number = 0;\r\n        keys.forEach((key:any)=>{\r\n          if (this.map_positions[key].positions[1] < position){\r\n            this.map_positions[key].positions[1] = position \r\n            this.map_positions[key].positions[3] = position + this.map_positions[key].positions[2]\r\n          }\r\n          position =  this.map_positions[key].positions[3] + this.map_positions[key].positions[0] \r\n            \r\n        })\r\n        this.protein = options.moleculeId\r\n        // console.log(this.map_positions, \"map postiions\")\r\n      }\r\n    } catch(err){\r\n      this.reportError(err, \"Error in fetching Query Info\")\r\n    } finally {\r\n      this.queryingResidueMapping = false;\r\n      try {\r\n        this.queryingReferenceSequence = true;\r\n        this.referenceSequence = []\r\n        let response: any =  await this.getdata(`https://www.ebi.ac.uk/pdbe/search/pdb/select?q=pdb_id:${options.moleculeId}&wt=json`)\r\n        if (\r\n          response.data && \r\n          response.data.response && \r\n          response.data.response.docs){\r\n          const chains: any = response.data.response.docs\r\n          let ref_seq: any[] = []\r\n          chains.forEach((chain: any)=>{\r\n            if (chain.entity_id in this.map_positions){\r\n              if (chain.title) {\r\n                this.title = chain.title\r\n              } else {\r\n                this.title = \"No title found\"\r\n              }\r\n              this.map_positions[chain.entity_id].chains = this.map_positions[chain.entity_id].chains.sort()\r\n              \r\n              const ids: any[]  = chain.struct_asym_id;\r\n              for (let i = this.map_positions[chain.entity_id].positions[1]; i < this.map_positions[chain.entity_id].positions[3]; i++){\r\n                if (i >= 0){\r\n                  const position = this.determinePosition(i, this.map_positions[chain.entity_id].positions[1])\r\n                  let chain_id = chain.molecule_sequence.substring(position,position+1)\r\n                  ref_seq.push( {\r\n                    position: i+1,\r\n                    aa: chain_id\r\n                  } )\r\n                  \r\n                }\r\n              }\r\n              this.referenceSequence = ref_seq\r\n            }\r\n          })\r\n        }\r\n      } catch(err){\r\n        this.reportError(err, \"Error in Fetching Reference Info\")\r\n      } finally {\r\n        this.queryingReferenceSequence = false;\r\n      }\r\n    }\r\n  }\r\n  \r\n  async make_pdbemolstar(options: any){\r\n    // this object is being imported in index.html so ignore the syntax error it throws\r\n    // @ts-ignore\r\n    this.viewer = new PDBeMolstarPlugin();\r\n    this.viewer.render(this.$refs.viewer, options);\r\n    // Remove some buttons that break everything\r\n    this.removeButtons();\r\n  }\r\n\r\n  async getdata(string:string){\r\n    let response = await axios\r\n      .get(string)\r\n    return response\r\n  }\r\n\r\n  async mounted() {\r\n    // Available options here: https://github.com/PDBeurope/pdbe-molstar/wiki/1.-PDBe-Molstar-as-JS-plugin\r\n    // Our H3N2 HA protein is 4o5n and our H1N1 HA protein is 3lzg\r\n    const options: any= {\r\n      moleculeId: this.protein_per_segment[this.DataHandler.subtype][this.segment],\r\n      assemblyId: this.assemblyId,\r\n      hideControls: true,\r\n      bgColor: {r:255, g:255, b:255}\r\n    }\r\n    this.make_pdbemolstar(options)\r\n    this.queryAPI(options)\r\n  }\r\n\r\n  determinePosition(localPosition: number, mapPosition: number){\r\n    return localPosition - mapPosition\r\n  }\r\n\r\n  // Example of focus ability. In the future let's rig this to the d3 heatmap so that when an amino acid is clicked, the molecule focuses on it\r\n  focus() {\r\n    this.viewer.visual.clearSelection();\r\n    let residue: Residue =  { chain: '', entity: '', position: 0 };\r\n    // if ( this.localPosition >= 25 && this.localPosition <= 341 ) {\r\n    //   residue = { chain: 'A', position: this.localPosition - 22 }\r\n    // } else if ( this.localPosition >= 346 && this.localPosition <= 518 ) {\r\n    //   residue = { chain: 'B', position: this.localPosition - 345 }\r\n    // } else {\r\n    //   residue = { chain: '', position: 0 }\r\n    // }\r\n    let found: boolean = false\r\n    for(let d of Object.keys(this.map_positions).sort().filter((e:any)=>{return e != 'total'})) {\r\n      if (this.localPosition  >= this.map_positions[d].positions[1] \r\n      && this.localPosition <= this.map_positions[d].positions[3]  ){\r\n        const position = this.determinePosition(this.localPosition,this.map_positions[d].positions[1])\r\n        if (! this.chain_focus || this.entity_focus != d){  \r\n          this.chain_focus = this.map_positions[d].chains[0]\r\n          this.available_focus_chains = this.map_positions[d].chains\r\n        }\r\n        this.entity_focus = d\r\n        residue = { chain: this.chain_focus, entity: d, position:  position }\r\n        found = true;\r\n        break;\r\n      }   \r\n    }\r\n    if(residue.chain !== '') {\r\n      this.viewer.visual.select({\r\n        data: [{\r\n          struct_asym_id: residue.chain,\r\n          entity_id: residue.entity,\r\n          residue_number: residue.position,\r\n          focus: true,\r\n          color: {r:255, g:255, b:0}\r\n        }\r\n        ]\r\n      })      \r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.viewer.visual.reset({ camera: true})\r\n    this.viewer.visual.clearSelection();\r\n  }\r\n\r\n  private removeButtons() {\r\n    // TODO: find better way to do this than directly accessing the DOM\r\n    // const button1 = document.querySelector('[title=\"Toggle Controls Panel\"]')\r\n    const button2 = document.querySelector('[title=\"Toggle Expanded Viewport\"]')\r\n    // if(button1){\r\n    //   button1.remove()\r\n    // }\r\n    if(button2){\r\n      button2.remove()\r\n    }\r\n  }\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoleculeViewer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoleculeViewer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MoleculeViewer.vue?vue&type=template&id=2dc54c2e&scoped=true&\"\nimport script from \"./MoleculeViewer.vue?vue&type=script&lang=ts&\"\nexport * from \"./MoleculeViewer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MoleculeViewer.vue?vue&type=style&index=0&id=2dc54c2e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2dc54c2e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',{},[_c('b-col',{staticClass:\"col-lg-10 pb-1\"},[_c('div',{ref:\"barPlotDiv\",style:({height: _vm.containerHeight+'px'}),attrs:{\"id\":\"barPlotDiv\"}}),_c('div',{ref:\"barPlotLegend\",staticStyle:{\"padding-top\":\"50px\"},attrs:{\"id\":\"barPlotLegend\"}})]),_c('b-col',{staticClass:\"col-lg-2 pb-1\"},[_c('b-field',{attrs:{\"label\":\"Scale\"}},[_c('b-select',{attrs:{\"options\":_vm.scales},on:{\"change\":function($event){return _vm.makeBarPlot()}},model:{value:(_vm.selected_scale),callback:function ($$v) {_vm.selected_scale=$$v},expression:\"selected_scale\"}})],1),_c('b-field',[_c('b-button',{on:{\"click\":function($event){return _vm.downloadSVG()}}},[_vm._v(\"Save SVG\")])],1),_c('hr'),_c('b-field',[_c('p',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Position: \"+_vm._s(_vm.localPosition))])]),_c('b-field',[_c('p',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Segment: \"+_vm._s(_vm.DataHandler.segment))])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator'\nimport swal from 'vue-sweetalert2'\nimport * as d3 from \"d3\";\n\n@Component({})\nexport default class BindingSites extends Vue {\n\n  @Prop({ required: true })\n  public DataHandler!: any;\n  @Watch(\"DataHandler.selectedPosition\", {deep:true})\n  onDataHandlerChanged(value: any, oldValue: any) {\n    this.localPosition = value\n    this.makeBarPlot()\n  }\n  changeDataHandler(){\n    this.makeBarPlot()\n  }\n  $refs!: {\n    barPlotDiv: HTMLElement;\n  };\n\n  public svg: any = null\n  containerHeight = 300;\n  chartHeight = this.containerHeight\n  width = 0\n  localPosition = 1\n  margin: any = {\n    top: 0.045 * this.chartHeight,\n    bottom: 0.45 * this.chartHeight,\n    left: 0.05 * this.width,\n    right: 0.0001 * this.width,\n  };\n  oversize: any  = 0\n  public scales = ['Linear', 'Sqrt', 'Log']\n  public selected_scale = this.scales[0]\n  downloadSVG(evt:any) {\n    var svg:any = document.querySelector(\"#innerheatmapSVGBarPlot\");\n    var svg_xml = (new XMLSerializer()).serializeToString(svg),\n    blob = new Blob([svg_xml], {type:'image/svg+xml;charset=utf-8'}),\n    url = window.URL.createObjectURL(blob);\n\n    \n    \n    var img = new Image();\n    const w = this.width\n    const h = this.containerHeight + 50\n    img.width = this.width\n    img.height = h;\n    const $this = this\n    img.onload = function(){\n      var canvas:any = document.createElement('canvas');\n      d3.select('canvas').append(\"text\").attr('transform', `translate(${w/2},${$this.margin.top/2})`).text(\"yyyyyyyyyyyyyyyyyyyyyyyyyy\")\n      canvas.width = w;\n      canvas.height = h;\n\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0, w, h);\n      ctx.font = \"16px Arial\";\n      // let localPosition: number = this.localPosition\n      ctx.fillText(`Segment: ${$this.DataHandler.segment}, Position: ${$this.localPosition}`, w / 2 , h - 25 )\n      window.URL.revokeObjectURL(url);\n      var canvasdata = canvas.toDataURL('image/jpeg');\n      var a: any = document.getElementById('imgId');\n      a.download = \"export_\" + Date.now() + \".jpeg\";\n      a.href=canvasdata;\n      a.click()  \n    }\n    img.src = url\n    \n    \n  }\n\n  makeBarPlot(){\n    console.log(\"make bar plot\")\n    const $this = this\n    d3.select(\"#barPlotDiv\").selectAll(\"*\").remove()\n    d3.select('#barPlotLegend').selectAll(\"*\").remove()\n    \n    const barplotDiv = d3.select(\"#barPlotDiv\")\n    \n    this.svg = barplotDiv.append(\"svg\")\n    .attr(\"id\", \"barPlotSVG\")\n    .attr(\"ref\", \"barPlotSVG\")\n    .attr(\"width\", this.width)\n      .attr(\"height\", this.containerHeight)\n      .style(\"position\", \"absolute\")\n      .style(\"pointer-events\", \"none\")\n      .style(\"z-index\", 1)\n    // .attr(\"viewBox\", `0 0 ${this.width } ${this.containerHeight}`)\n\n    const body = barplotDiv.append(\"div\")\n      .attr(\"id\",\"overflowDivBarPlot\")\n      .style(\"overflow-x\", \"scroll\")\n      // .style(\"height\", this.containerHeight  )\n      // .style(\"width\", this.width / 6)\n      \n\n    const innerSvg = body.append(\"svg\")\n      .attr(\"id\", \"innerheatmapSVGBarPlot\")\n      .style(\"display\", \"block\")\n      .style(\"background\", \"#fff\")\n      .style(\"fill\", \"#fff\")\n      .attr(\"width\", this.width)\n      .attr(\"height\", this.containerHeight)\n\n      \n    let svgG: any = innerSvg.append(\"g\").attr(\"id\", \"svgG\")\n    let colors: string[] = ['#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe', '#008080', '#e6beff', '#9a6324', '#fffac8', '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#808080', 'red', '#000']\n    let aas: string[]  = [\"M\", \"K\", \"A\", \"I\", \"L\", \"V\", \"Y\", \"T\", \"F\", \"N\", \"D\", \"C\", \"G\", \"H\", \"S\", \"E\", \"P\", \"W\", \"R\", \"Q\"]\n    \n    let preps: any = [...new Set(this.DataHandler.cells.map((d: any) => d.experiment))];\n    // let aas: any = [...new Set(this.DataHandler.cells.map((d: any) => d.aa))];\n    let data: any[] = d3.filter(this.DataHandler.cells, (d: any)=>{\n      return d.position == $this.localPosition\n    })\n    .map((d:any)=>{\n      let r: any = {prep: d.experiment}\n      d.unique.map((f:any)=>{\n        r[f.aa] = +f.proportion\n      })\n      aas.forEach((aa:any)=>{\n        if (! (aa in r ) ){\n          r[aa] = 0\n        }\n      })\n      return r\n    })\n    \n    \n    let chartWidth = this.width - this.margin.right\n    let boxDim: any = (chartWidth - this.margin.left) / preps.length\n    this.chartHeight = this.containerHeight - this.margin.top - this.margin.bottom\n    let scaleX: any = d3.scaleBand().domain(preps)\n    .range([this.margin.left, chartWidth ])\n    \n    let scaleY: any = null\n    if (this.selected_scale == 'Linear'){\n      scaleY = d3.scaleLinear().domain([0, 1])\n      .range([this.chartHeight, this.margin.top ])\n    } else if (this.selected_scale == 'Sqrt' ){\n      scaleY = d3.scaleSqrt().domain([0,1])\n      .range([this.chartHeight, this.margin.top ])\n    }\n    else {\n      scaleY = d3.scaleSymlog().clamp(true).domain([0,1])\n      .range([this.chartHeight, this.margin.top ])\n    }\n      \n    let scaleColor: any = d3.scaleOrdinal().domain(colors).range(colors);\n    \n    let xAxisB: any = d3\n      .axisBottom(scaleX)\n      .ticks(5)\n      .tickSizeOuter(0)\n      .tickSize(0)\n    let xAxis: any = svgG.append(\"g\")\n    .attr(\"class\", \"xAxis\")\n    .attr(\"id\", \"xAxisTBar\")\n    .attr(\"transform\", \"translate(\" + (0) + \",\" + (this.chartHeight )  + \")\")\n    .style(\"fill\", null)\n    .style(\"stroke-width\", 0.2)\n    .call(xAxisB)\n    xAxis.selectAll('text')\n    .style('text-anchor', 'start')\n    .attr('transform', 'rotate(45)').style(\"font-size\", \"1em\")\n\n    let yAxisB: any = d3\n      .axisLeft(scaleY)\n      .ticks(5)\n      .tickSizeOuter(0)\n      .tickSize(0)\n\n\n    let yAxis: any = svgG.append(\"g\")\n    .attr(\"class\", \"yAxis\")\n    .attr(\"id\", \"yAxisTBar\")\n    .attr(\"transform\", \"translate(\" + (this.margin.left ) + \",\" + (0) + \")\")\n    .style(\"fill\", null)\n    .style(\"stroke-width\", 0.2)\n    .call(yAxisB)\n\n    let stacks: any = d3.stack().keys(aas)\n    (data)\n    .map((d:any)=>{\n      d.forEach((v:any)=>{\n        v.key = d.key\n      })\n      return d\n    })\n    svgG\n    .attr(\"id\", \"barPlotG\")\n    .selectAll(\".barG\")\n    .data(stacks).enter()\n    .append(\"g\")\n    \n    .classed(\"barG\", true)\n    .selectAll(\".posBar\")\n    .data((d:any)=>{return d})\n    .join(\n      function (enter: any) {\n        return enter\n        .append(\"rect\")\n\t\t    .classed('posBar', true)\n        .attr(\"transform\", (d: any, i: any) => {\n          return \"translate(\" + scaleX(d.data.prep) + \",\" +  ( scaleY(d[1])  ) + \")\";\n        })\n        .style(\"cursor\", \"pointer\")\n        .attr(\"width\",  boxDim )\n        .style(\"stroke\", \"#fff\")\n        .attr(\"height\",  (d:any, i:any)=>{   \n          return scaleY(d[0]) - scaleY(d[1])\n        })\n        .style(\"fill\", (d: any) => {\n          return scaleColor(d.key)\n        })\n      },\n      function (update: any){\n        return update\n      },\n      function (exit: any) {\n        return exit.remove()\n      }\n    )\n\n\n    let legendHeight: number = $this.chartHeight   * 1\n    let legendWidth: number = this.width\n    \n    let legendMargin: any = {\n      top: legendHeight * 0.1,\n      left: legendHeight * 0.1,\n      right: legendHeight * 0.1,\n      bottom: legendHeight * 0.2\n    }\n    legendHeight  = legendHeight - legendMargin.top - legendMargin.bottom\n    let legendBoxHeight: number = legendHeight * 0.5  \n    let legendBox: number = legendWidth  / aas.length\n\n    let g: any = d3.select(\"#barPlotLegend\")\n    .append(\"svg\")\n    .attr(\"id\", \"barPlotLegendSVG\")\n    .attr(\"viewBox\", `0 0 ${legendWidth} ${legendHeight}`)\n    .append(\"g\")\n\n\n    scaleX = d3.scaleBand().domain(aas)\n    .range([0, legendWidth  ])\n    \n    g.selectAll(\".posBarLegRect\")\n    .data(aas)\n    .enter()\n    .append(\"rect\")\n    .attr(\"transform\", (d:any) =>{\n      return \"translate(\" + scaleX(d) + \",\" + (0) + \")\"\n    })\n    .attr(\"height\",  legendBoxHeight )\n    .attr(\"width\", legendBox )\n    .style(\"fill\", (d:any) => scaleColor(d))\n    \n    \n    let xAxisLegB: any = d3\n      .axisBottom(scaleX)\n      .ticks(20)\n      .tickSizeOuter(0)\n      .tickSize(0)\n    let xAxisLeg: any = g.append(\"g\")\n    .attr(\"class\", \"xAxis\")\n    .attr(\"id\", \"xAxisRBar\")\n    .attr(\"transform\", \"translate(\" + (0) + \",\" + (legendBoxHeight) + \")\")\n    .style(\"fill\", null)\n    .style(\"stroke-width\", 0.2)\n    .call(xAxisLegB)\n    .call((g:any) => g.select(\".domain\").remove())\n    .selectAll('text')\n    .style('text-anchor', 'middle')\n    .attr('transform', 'rotate(0)').style(\"font-size\", \"17px\")\n    try {\n      let maxyTick: any = d3.max(yAxis.selectAll(\"g\").nodes().map((d:any)=>{\n          return d.getBBox().height\n        })\n      )      \n      if (maxyTick > boxDim){\n        yAxis.style(\"font-size\", `${ boxDim / (maxyTick) }em`)\n      }    \n      maxyTick =  d3.max(xAxis.selectAll(\"g\").nodes().map((d:any)=>{\n          return d.getBBox().height\n        })\n      )\n      if (maxyTick > this.margin.bottom){\n        const l = this.margin.bottom\n        xAxis.style(\"font-size\", `${ (l) / (maxyTick) }em`)\n      }   \n    } catch(err: any){\n      console.error(err)\n    }\n\n\n  }\n\n  mounted(){\n    this.width = this.$refs.barPlotDiv.clientWidth\n    this.margin.right= 0.05 * this.width\n    this.margin.left  = 0.1 * this.width\n    this.width = this.width * 2\n    \n    this.makeBarPlot()\n  }\n\n}\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BarPlot.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BarPlot.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BarPlot.vue?vue&type=template&id=a917a622&\"\nimport script from \"./BarPlot.vue?vue&type=script&lang=ts&\"\nexport * from \"./BarPlot.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport VisualizationOptions from '@/components/VisualizationOptions.vue'\r\nimport Heatmap from './Heatmap.vue'\r\nimport MoleculeViewer from './MoleculeViewer.vue'\r\nimport LocalDataHelper from \"@/shared/LocalDataHelper\";\r\nimport DataHandler from \"@/shared/DataHandler\";\r\nimport BarPlot from '@/components/BarPlot.vue'\r\n\r\n@Component({\r\n  components: {\r\n    Heatmap,\r\n    VisualizationOptions,\r\n    MoleculeViewer,\r\n    BarPlot\r\n  }\r\n})\r\nexport default class Visualization extends Vue {\r\n  public depth_threshold = 0\r\n  public frequency_threshold = 0.2\r\n  public column_width = 9\r\n  public segment = 'HA'\r\n  public position = 54\r\n  public cells:any = null\r\n  public group: any[] = []\r\n  public customfile: any = null\r\n  public isSwitched: boolean = true\r\n  public sortBy: boolean = true\r\n  public referenceSequence: any[] = [];\r\n  private localDataHelper = new LocalDataHelper();\r\n  public switchedViewer = true\r\n  private DataHandler = new DataHandler()\r\n  $refs!: {\r\n    heatmap: any;\r\n    barplot: any;\r\n  };\r\n  sliderUpdate(gh: {target: string, value: any}) {\r\n    const target = gh.target\r\n    const value = gh.value\r\n    this.$set(this, target, value)\r\n    if (target == 'DataHandler'){\r\n      this.segment = value.segment\r\n      if (this.$refs.heatmap){\r\n        this.$refs.heatmap.changeDataHandler()\r\n        this.$refs.barplot.changeDataHandler()\r\n      }\r\n    }\r\n    \r\n  }\r\n  siteHover(event: any){\r\n    if (event.focus){\r\n      this.$refs.heatmap.focusColumn(event.position, true)\r\n    } else {\r\n      this.$refs.heatmap.unfocusColumn(event.position)\r\n    }\r\n  }\r\n  changePosition(value: number){\r\n    this.position = value\r\n  }\r\n  changeReferenceSequence(value: any){\r\n    this.DataHandler.updateReference(value)\r\n    this.sliderUpdate({target: \"DataHandler\", value: this.DataHandler})\r\n  }  \r\n  \r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualization.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualization.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Visualization.vue?vue&type=template&id=d54c97b2&scoped=true&\"\nimport script from \"./Visualization.vue?vue&type=script&lang=ts&\"\nexport * from \"./Visualization.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Visualization.vue?vue&type=style&index=0&id=d54c97b2&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d54c97b2\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\r\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\n\r\nimport Visualization from '@/components/Visualization.vue'\r\n\r\n@Component({\r\n  components: {\r\n    Visualization\r\n  }\r\n})\r\nexport default class DataView extends Vue {\r\n\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DataView.vue?vue&type=template&id=10972031&scoped=true&\"\nimport script from \"./DataView.vue?vue&type=script&lang=ts&\"\nexport * from \"./DataView.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10972031\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator'\nimport NavigationBar from './components/NavigationBar.vue'\nimport DataView from '@/views/DataView.vue'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n@Component({\n  components: {\n    NavigationBar,\n    DataView\n  }\n})\nexport default class App extends Vue {\n\n}\n\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4fa5c681&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=4fa5c681&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fa5c681\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" Lorem ipsem... \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\r\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\n\r\n@Component({})\r\nexport default class AboutView extends Vue {\r\n\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AboutView.vue?vue&type=template&id=5b1b9234&scoped=true&\"\nimport script from \"./AboutView.vue?vue&type=script&lang=ts&\"\nexport * from \"./AboutView.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b1b9234\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport VueRouter, { RouteConfig } from 'vue-router'\r\nimport DataView from '@/views/DataView.vue'\r\nimport AboutView from '@/views/AboutView.vue'\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes: Array<RouteConfig> = [\r\n  {\r\n    path: '/',\r\n    name: 'Data',\r\n    component: DataView\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'About',\r\n    component: AboutView\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  routes,\r\n  base: '/BARDA'\r\n})\r\n\r\nexport default router\r\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n// import store from './store'   // In the future, we might want to use the store\n\nimport Buefy from 'buefy'\nimport '@mdi/font/css/materialdesignicons.css'\n\nimport { BootstrapVue } from 'bootstrap-vue'\nimport VueSweetalert2 from 'vue-sweetalert2'\nimport 'sweetalert2/dist/sweetalert2.min.css';\n\nrequire('@/assets/scss/custom.scss')\nVue.use(Buefy)\nVue.use(BootstrapVue)\nVue.use(VueSweetalert2)\nVue.config.productionTip = false\nnew Vue({\n  router,\n  // store,\n  render: h => h(App)\n}).$mount('#app')\n"],"sourceRoot":""}